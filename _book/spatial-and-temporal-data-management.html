<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Spatial and Temporal Data Management | DataManagement.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Spatial and Temporal Data Management | DataManagement.knit" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Spatial and Temporal Data Management | DataManagement.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="section-3-advanced-data-management.html"/>
<link rel="next" href="graph-databases.html"/>
<script src="libs/header-attrs-2.12/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="data-management-databases-and-organizations.html#data-management-databases-and-organizations">Data Management: Databases and Organizations<span></span></a></li>
<li><a href="preface.html#preface">Preface<span></span></a>
<ul>
<li><a href="preface.html#supplements">Supplements<span></span></a></li>
<li><a href="preface.html#acknowledgments">Acknowledgments<span></span></a></li>
</ul></li>
<li><a href="section-1-the-managerial-perspective.html#section-1-the-managerial-perspective">Section 1 The Managerial Perspective<span></span></a></li>
<li class="chapter" data-level="1" data-path="managing-data.html"><a href="managing-data.html"><i class="fa fa-check"></i><b>1</b> Managing Data<span></span></a>
<ul>
<li><a href="managing-data.html#introduction">Introduction<span></span></a></li>
<li><a href="managing-data.html#individual-data-management">Individual data management<span></span></a></li>
<li><a href="managing-data.html#organizational-data-management">Organizational data management<span></span></a></li>
<li><a href="managing-data.html#problems-with-data-management-systems">Problems with data management systems<span></span></a></li>
<li><a href="managing-data.html#a-brief-history-of-data-management-systems">A brief history of data management systems<span></span></a></li>
<li><a href="managing-data.html#data-information-and-knowledge">Data, information, and knowledge<span></span></a></li>
<li><a href="managing-data.html#the-challenge">The challenge<span></span></a></li>
<li><a href="managing-data.html#exercises">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="information.html"><a href="information.html"><i class="fa fa-check"></i><b>2</b> Information<span></span></a>
<ul>
<li><a href="information.html#introduction-1">Introduction<span></span></a></li>
<li><a href="information.html#a-historical-perspective">A historical perspective<span></span></a></li>
<li><a href="information.html#a-brief-history-of-information-systems">A brief history of information systems<span></span></a></li>
<li><a href="information.html#information-characteristics">Information characteristics<span></span></a></li>
<li><a href="information.html#information-and-organizational-change">Information and organizational change<span></span></a></li>
<li><a href="information.html#information-and-managerial-work">Information and managerial work<span></span></a></li>
<li><a href="information.html#managers-information-requirements">Managers’ information requirements<span></span></a></li>
<li><a href="information.html#information-delivery-systems">Information delivery systems<span></span></a></li>
<li><a href="information.html#information-integration">Information integration<span></span></a></li>
<li><a href="information.html#knowledge-1">Knowledge<span></span></a></li>
<li><a href="information.html#exercises-1">Exercises<span></span></a></li>
</ul></li>
<li><a href="section-2-data-modeling-and-sql.html#section-2-data-modeling-and-sql">Section 2 Data Modeling and SQL<span></span></a></li>
<li class="chapter" data-level="3" data-path="the-single-entity.html"><a href="the-single-entity.html"><i class="fa fa-check"></i><b>3</b> The Single Entity<span></span></a>
<ul>
<li><a href="the-single-entity.html#the-relational-model">The relational model<span></span></a></li>
<li><a href="the-single-entity.html#getting-started">Getting started<span></span></a></li>
<li><a href="the-single-entity.html#modeling-a-single-entity-database">Modeling a single-entity database<span></span></a></li>
<li><a href="the-single-entity.html#creating-a-single-table-database">Creating a single-table database<span></span></a></li>
<li><a href="the-single-entity.html#querying-a-single-table-database">Querying a single-table database<span></span></a></li>
<li><a href="the-single-entity.html#exercises-2">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-one-to-many-relationship.html"><a href="the-one-to-many-relationship.html"><i class="fa fa-check"></i><b>4</b> The One-to-Many Relationship<span></span></a>
<ul>
<li><a href="the-one-to-many-relationship.html#relationships">Relationships<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#creating-a-database-with-a-1m-relationship">Creating a database with a 1:m relationship<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#querying-a-two-table-database">Querying a two-table database<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#regular-expressionpattern-matching-1">Regular expression—pattern matching<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#subqueries-1">Subqueries<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#exercises-3">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-many-to-many-relationship.html"><a href="the-many-to-many-relationship.html"><i class="fa fa-check"></i><b>5</b> The Many-to-Many Relationship<span></span></a>
<ul>
<li><a href="the-many-to-many-relationship.html#the-many-to-many-relationship-1">The many-to-many relationship<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#creating-a-relational-database-with-an-mm-relationship">Creating a relational database with an m:m relationship<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#querying-an-mm-relationship">Querying an m:m relationship<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#key-terms-and-concepts-2">Key terms and concepts<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#exercises-4">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="one-to-one-and-recursive-relationships.html"><a href="one-to-one-and-recursive-relationships.html"><i class="fa fa-check"></i><b>6</b> One-to-One and Recursive Relationships<span></span></a>
<ul>
<li><a href="one-to-one-and-recursive-relationships.html#modeling-a-one-to-one-relationship">Modeling a one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-one-to-one-relationship">Mapping a one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-recursive-one-to-many-relationship">Mapping a recursive one-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-one-to-one-relationship">Querying a one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-recursive-1m-relationship">Querying a recursive 1:m relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#modeling-a-recursive-one-to-one-relationship">Modeling a recursive one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-recursive-one-to-one-relationship">Mapping a recursive one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-recursive-one-to-one-relationship">Querying a recursive one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#modeling-a-recursive-many-to-many-relationship">Modeling a recursive many-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-recursive-many-to-many-relationship">Mapping a recursive many-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-recursive-many-to-many-relationship">Querying a recursive many-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#exercises-5">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-modeling.html"><a href="data-modeling.html"><i class="fa fa-check"></i><b>7</b> Data Modeling<span></span></a>
<ul>
<li><a href="data-modeling.html#modeling">Modeling<span></span></a></li>
<li><a href="data-modeling.html#data-modeling-1">Data modeling<span></span></a></li>
<li><a href="data-modeling.html#data-model-quality">Data model quality<span></span></a></li>
<li><a href="data-modeling.html#quality-improvement">Quality improvement<span></span></a></li>
<li><a href="data-modeling.html#data-modeling-hints">Data modeling hints<span></span></a></li>
<li><a href="data-modeling.html#the-seven-habits-of-highly-effective-data-modelers">The seven habits of highly effective data modelers<span></span></a></li>
<li><a href="data-modeling.html#exercises-6">Exercises<span></span></a></li>
</ul></li>
<li><a href="reference-1-basic-structures.html#reference-1-basic-structures">Reference 1: Basic Structures<span></span></a>
<ul>
<li><a href="reference-1-basic-structures.html#one-entity">One entity<span></span></a></li>
<li><a href="reference-1-basic-structures.html#two-entities">Two entities<span></span></a></li>
<li><a href="reference-1-basic-structures.html#another-entitys-identifier-as-part-of-the-identifier">Another entity’s identifier as part of the identifier<span></span></a></li>
<li><a href="reference-1-basic-structures.html#exercises-7">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="normalization-and-other-data-modeling-methods.html"><a href="normalization-and-other-data-modeling-methods.html"><i class="fa fa-check"></i><b>8</b> Normalization and Other Data Modeling Methods<span></span></a>
<ul>
<li><a href="normalization-and-other-data-modeling-methods.html#multiple-paths">Multiple paths<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#normalization">Normalization<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#other-data-modeling-methods">Other data modeling methods<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#key-terms-and-concepts-5">Key terms and concepts<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#exercises-8">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-relational-model-and-relational-algebra.html"><a href="the-relational-model-and-relational-algebra.html"><i class="fa fa-check"></i><b>9</b> The Relational Model and Relational Algebra<span></span></a>
<ul>
<li><a href="the-relational-model-and-relational-algebra.html#background">Background<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#data-structures">Data structures<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#integrity-rules">Integrity rules<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#manipulation-languages">Manipulation languages<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#a-fully-relational-database">A fully relational database<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#exercises-9">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="sql.html"><a href="sql.html"><i class="fa fa-check"></i><b>10</b> SQL<span></span></a>
<ul>
<li><a href="sql.html#structured-query-language">Structured query language<span></span></a></li>
<li><a href="sql.html#creating-a-table">Creating a table<span></span></a></li>
<li><a href="sql.html#data-types">Data types<span></span></a></li>
<li><a href="sql.html#collation-sequence">Collation sequence<span></span></a></li>
<li><a href="sql.html#scalar-functions">Scalar functions<span></span></a></li>
<li><a href="sql.html#formatting">Formatting<span></span></a></li>
<li><a href="sql.html#table-commands">Table commands<span></span></a></li>
<li><a href="sql.html#data-manipulation">Data manipulation<span></span></a></li>
<li><a href="sql.html#insert">INSERT<span></span></a></li>
<li><a href="sql.html#update-1">UPDATE<span></span></a></li>
<li><a href="sql.html#delete-1">DELETE<span></span></a></li>
<li><a href="sql.html#sql-routines">SQL routines<span></span></a></li>
<li><a href="sql.html#universal-unique-identifier-uuid">Universal Unique Identifier (UUID)<span></span></a></li>
<li><a href="sql.html#nullsmuch-ado-about-missing-information">Nulls—much ado about missing information<span></span></a></li>
<li><a href="sql.html#security">Security<span></span></a></li>
<li><a href="sql.html#the-system-catalog">The system catalog<span></span></a></li>
<li><a href="sql.html#natural-language-processing">Natural language processing<span></span></a></li>
<li><a href="sql.html#connectivity-and-odbc">Connectivity and ODBC<span></span></a></li>
<li><a href="sql.html#embedded-sql">Embedded SQL<span></span></a></li>
<li><a href="sql.html#user-defined-types">User-defined types<span></span></a></li>
<li><a href="sql.html#the-future-of-sql">The future of SQL<span></span></a></li>
</ul></li>
<li><a href="reference-2-sql-playbook.html#reference-2-sql-playbook">Reference 2: SQL Playbook<span></span></a>
<ul>
<li><a href="reference-2-sql-playbook.html#the-power-of-sql">The power of SQL<span></span></a></li>
</ul></li>
<li><a href="section-3-advanced-data-management.html#section-3-advanced-data-management">Section 3 Advanced Data Management<span></span></a></li>
<li class="chapter" data-level="11" data-path="spatial-and-temporal-data-management.html"><a href="spatial-and-temporal-data-management.html"><i class="fa fa-check"></i><b>11</b> Spatial and Temporal Data Management<span></span></a>
<ul>
<li><a href="spatial-and-temporal-data-management.html#spatial-data">Spatial data<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#managing-spatial-data">Managing spatial data<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#data-model-mapping">Data model mapping<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#r-tree">R-tree<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#managing-temporal-data">Managing temporal data<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#key-terms-and-concepts-8">Key terms and concepts<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#exercises-11">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graph-databases.html"><a href="graph-databases.html"><i class="fa fa-check"></i><b>12</b> Graph Databases<span></span></a>
<ul>
<li><a href="graph-databases.html#a-graph-database">A graph database<span></span></a></li>
<li><a href="graph-databases.html#neo4j-a-graph-database-implementation">Neo4j – a graph database implementation<span></span></a></li>
<li><a href="graph-databases.html#a-relationship-between-nodes">A relationship between nodes<span></span></a></li>
<li><a href="graph-databases.html#key-terms-and-concepts-9">Key terms and concepts<span></span></a></li>
<li><a href="graph-databases.html#exercises-12">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="xml-managing-data-exchange.html"><a href="xml-managing-data-exchange.html"><i class="fa fa-check"></i><b>13</b> XML: Managing Data Exchange<span></span></a>
<ul>
<li><a href="xml-managing-data-exchange.html#four-problems">Four problems<span></span></a></li>
<li><a href="xml-managing-data-exchange.html#sgml">SGML<span></span></a></li>
<li><a href="xml-managing-data-exchange.html#xml">XML<span></span></a></li>
<li><a href="xml-managing-data-exchange.html#xml-schema">XML schema<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="organizational-intelligence.html"><a href="organizational-intelligence.html"><i class="fa fa-check"></i><b>14</b> Organizational Intelligence<span></span></a>
<ul>
<li><a href="organizational-intelligence.html#information-poverty">Information poverty<span></span></a></li>
<li><a href="organizational-intelligence.html#an-organizational-intelligence-system">An organizational intelligence system<span></span></a></li>
<li><a href="organizational-intelligence.html#the-data-warehouse">The data warehouse<span></span></a></li>
<li><a href="organizational-intelligence.html#exploiting-data-stores">Exploiting data stores<span></span></a></li>
<li><a href="organizational-intelligence.html#data-mining">Data mining<span></span></a></li>
<li><a href="organizational-intelligence.html#exercises-14">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>15</b> Introduction to R<span></span></a>
<ul>
<li><a href="introduction-to-r.html#the-r-project">The R project<span></span></a></li>
<li><a href="introduction-to-r.html#datasets">Datasets<span></span></a></li>
<li><a href="introduction-to-r.html#packages">Packages<span></span></a></li>
<li><a href="introduction-to-r.html#file-handing">File handing<span></span></a></li>
<li><a href="introduction-to-r.html#data-manipulation-with-dplyr">Data manipulation with dplyr<span></span></a></li>
<li><a href="introduction-to-r.html#database-access">Database access<span></span></a></li>
<li><a href="introduction-to-r.html#excel-files">Excel files<span></span></a></li>
<li><a href="introduction-to-r.html#r-resources">R resources<span></span></a></li>
<li><a href="introduction-to-r.html#r-and-data-analytics">R and data analytics<span></span></a></li>
<li><a href="introduction-to-r.html#exercises-15">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="data-visualization-1.html"><a href="data-visualization-1.html"><i class="fa fa-check"></i><b>16</b> Data visualization<span></span></a>
<ul>
<li><a href="data-visualization-1.html#visual-processing">Visual processing<span></span></a></li>
<li><a href="data-visualization-1.html#the-grammar-of-graphics">The grammar of graphics<span></span></a></li>
<li><a href="data-visualization-1.html#ggplot2">ggplot2<span></span></a></li>
<li><a href="data-visualization-1.html#some-recipes">Some recipes<span></span></a></li>
<li><a href="data-visualization-1.html#geographic-data">Geographic data<span></span></a></li>
<li><a href="data-visualization-1.html#r-resources-1">R resources<span></span></a></li>
<li><a href="data-visualization-1.html#exercises-16">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="text-mining-natural-language-processing.html"><a href="text-mining-natural-language-processing.html"><i class="fa fa-check"></i><b>17</b> Text mining &amp; natural language processing<span></span></a>
<ul>
<li><a href="text-mining-natural-language-processing.html#the-nature-of-language">The nature of language<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#levels-of-processing">Levels of processing<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#tokenization">Tokenization<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#sentiment-analysis">Sentiment analysis<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#corpus">Corpus<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#readability">Readability<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#preprocessing">Preprocessing<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#word-frequency-analysis">Word frequency analysis<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#co-occurrence-and-association">Co-occurrence and association<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#cluster-analysis">Cluster analysis<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#topic-modeling">Topic modeling<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#named-entity-recognition-ner">Named-entity recognition (NER)<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#future-developments">Future developments<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#key-terms-and-concepts-13">Key terms and concepts<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#exercises-17">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="cluster-computing.html"><a href="cluster-computing.html"><i class="fa fa-check"></i><b>18</b> Cluster computing<span></span></a>
<ul>
<li><a href="cluster-computing.html#a-paradigm-shift">A paradigm shift<span></span></a></li>
<li><a href="cluster-computing.html#the-drivers">The drivers<span></span></a></li>
<li><a href="cluster-computing.html#the-bottleneck-and-its-solution">The bottleneck and its solution<span></span></a></li>
<li><a href="cluster-computing.html#lambda-architecture">Lambda Architecture<span></span></a></li>
<li><a href="cluster-computing.html#hadoop">Hadoop<span></span></a></li>
<li><a href="cluster-computing.html#spark">Spark<span></span></a></li>
<li><a href="cluster-computing.html#exercises-18">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i><b>19</b> Dashboards<span></span></a>
<ul>
<li><a href="dashboards.html#the-value-of-dashboards">The value of dashboards<span></span></a></li>
<li><a href="dashboards.html#designing-a-dashboard">Designing a dashboard<span></span></a></li>
<li><a href="dashboards.html#dashboards-with-r">Dashboards with R<span></span></a></li>
<li><a href="dashboards.html#conclusion-5">Conclusion<span></span></a></li>
<li><a href="dashboards.html#exercises-19">Exercises<span></span></a></li>
</ul></li>
<li><a href="section-4-managing-organizational-memory.html#section-4-managing-organizational-memory">Section 4 Managing Organizational Memory<span></span></a></li>
<li class="chapter" data-level="20" data-path="data-structure-and-storage.html"><a href="data-structure-and-storage.html"><i class="fa fa-check"></i><b>20</b> Data Structure and Storage<span></span></a>
<ul>
<li><a href="data-structure-and-storage.html#the-data-deluge">The data deluge<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-structures-1">Data structures<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-coding-standards">Data coding standards<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-storage-devices">Data storage devices<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-compression">Data compression<span></span></a></li>
<li><a href="data-structure-and-storage.html#key-terms-and-concepts-15">Key terms and concepts<span></span></a></li>
<li><a href="data-structure-and-storage.html#exercises-20">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="data-processing-architectures.html"><a href="data-processing-architectures.html"><i class="fa fa-check"></i><b>21</b> Data Processing Architectures<span></span></a>
<ul>
<li><a href="data-processing-architectures.html#architectural-choices">Architectural choices<span></span></a></li>
<li><a href="data-processing-architectures.html#remote-job-entry">Remote job entry<span></span></a></li>
<li><a href="data-processing-architectures.html#personal-database">Personal database<span></span></a></li>
<li><a href="data-processing-architectures.html#clientserver">Client/server<span></span></a></li>
<li><a href="data-processing-architectures.html#cloud-computing">Cloud computing<span></span></a></li>
<li><a href="data-processing-architectures.html#distributed-database">Distributed database<span></span></a></li>
<li><a href="data-processing-architectures.html#distributed-data-access">Distributed data access<span></span></a></li>
<li><a href="data-processing-architectures.html#distributed-database-design">Distributed database design<span></span></a></li>
<li><a href="data-processing-architectures.html#key-terms-and-concepts-16">Key terms and concepts<span></span></a></li>
<li><a href="data-processing-architectures.html#exercises-21">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="sql-and-java.html"><a href="sql-and-java.html"><i class="fa fa-check"></i><b>22</b> SQL and Java<span></span></a>
<ul>
<li><a href="sql-and-java.html#java">JAVA<span></span></a></li>
<li><a href="sql-and-java.html#using-sql-within-java">Using SQL within Java<span></span></a></li>
<li><a href="sql-and-java.html#javaserver-pages-jsp">JavaServer Pages (JSP)<span></span></a></li>
<li><a href="sql-and-java.html#exercises-22">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="data-integrity.html"><a href="data-integrity.html"><i class="fa fa-check"></i><b>23</b> Data Integrity<span></span></a>
<ul>
<li><a href="data-integrity.html#introduction-2">Introduction<span></span></a></li>
<li><a href="data-integrity.html#transaction-management">Transaction management<span></span></a></li>
<li><a href="data-integrity.html#protecting-existence">Protecting existence<span></span></a></li>
<li><a href="data-integrity.html#maintaining-data-quality">Maintaining data quality<span></span></a></li>
<li><a href="data-integrity.html#ensuring-confidentiality">Ensuring confidentiality<span></span></a></li>
<li><a href="data-integrity.html#key-terms-and-concepts-18">Key terms and concepts<span></span></a></li>
<li><a href="data-integrity.html#exercises-23">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="data-administration.html"><a href="data-administration.html"><i class="fa fa-check"></i><b>24</b> Data Administration<span></span></a>
<ul>
<li><a href="data-administration.html#introduction-3">Introduction<span></span></a></li>
<li><a href="data-administration.html#the-chief-data-officer">The Chief Data Officer<span></span></a></li>
<li><a href="data-administration.html#management-of-the-database-environment">Management of the database environment<span></span></a></li>
<li><a href="data-administration.html#data-administration-1">Data administration<span></span></a></li>
<li><a href="data-administration.html#database-management-systems-dbmss">Database management systems (DBMSs)<span></span></a></li>
<li><a href="data-administration.html#groupware-1">Groupware<span></span></a></li>
<li><a href="data-administration.html#data-integration">Data integration<span></span></a></li>
<li><a href="data-administration.html#conclusion-9">Conclusion<span></span></a></li>
<li><a href="data-administration.html#exercises-24">Exercises<span></span></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="spatial-and-temporal-data-management" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Chapter 11</span> Spatial and Temporal Data Management<a href="spatial-and-temporal-data-management.html#spatial-and-temporal-data-management" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p><em>Nothing puzzles me more than time and space; and yet nothing troubles me less, as I never think about them.</em></p>
<p>Charles Lamb, 1810.</p>
</blockquote>
<div id="learning-objectives-10" class="section level3 unnumbered hasAnchor">
<h3>Learning objectives<a href="spatial-and-temporal-data-management.html#learning-objectives-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Students completing this chapter will</p>
<ul>
<li><p>be able to define and use a spatial database;</p></li>
<li><p>be familiar with the issues surrounding the management of temporal data.</p></li>
</ul>
</div>
<div id="spatial-data" class="section level2 unnumbered hasAnchor">
<h2>Spatial data<a href="spatial-and-temporal-data-management.html#spatial-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The introduction of ubiquitous networks and smartphones has led to the advent of location-based services. Customers expect information delivered based on, among other things, where they are. For example, a person touring the historic German city of Regensburg could receive information about its buildings and parks via their mobile phone in the language of choice. Their smartphone will determine their location and then select from a database details of the immediate environment. Data managers need to know how to manage the <strong>spatial</strong> data necessary to support location-based services.</p>
<p>Some aspect of time is an important fact to remember for many applications. Banks, for example, want to remember what dates customers made payments on their loans. Airlines need to recall for the current and future days who will occupy seats on each flight. Thus, the management of time-varying, or <strong>temporal</strong>, data is availed when a database management system has built-in temporal support. As a result, there has been extensive research on temporal data models and RDBMSs for more than a decade. The management of temporal data is another skill required of today’s data management specialist.</p>
<p>The <a href="https://www.ogc.org">Open Geospatial Consortium</a>, Inc. (OGC) is a nonprofit international organization developing standards for geospatial and location-based services. Its goal is to create open and extensible software application programming interfaces for geographic information systems (GIS) and other geospatial technologies. RDBMS vendors (e.g., MySQL) have implemented some of OGC’s recommendations for adding spatial features to SQL. MySQL is gradually adding further GIS features as it develops its DBMS.</p>
</div>
<div id="managing-spatial-data" class="section level2 unnumbered hasAnchor">
<h2>Managing spatial data<a href="spatial-and-temporal-data-management.html#managing-spatial-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A spatial database is a data management system for the collection, storage, manipulation, and output of spatially referenced information. Also known as a geographic information system (GIS), it is an extended form of RDBMS. Geospatial modeling is based on three key concepts: theme, geographic object, and map.</p>
<p>A <strong>theme</strong> refers to data describing a particular topic (e.g., scenic lookouts, rivers, cities) and is the spatial counterpart of an entity. When a theme is presented on a screen or paper, it is commonly seen in conjunction with a <strong>map</strong>. Color may be used to indicate different themes (e.g., blue for rivers and black for roads). A map will usually have a scale, legend, and possibly some explanatory text.</p>
<p>A <strong>geographic object</strong> is an instance of a theme (e.g., a river). Like an instance of an entity, it has a set of attributes. In addition, it has spatial components that can describe both geometry and topology. Geometry refers to the location-based data, such as shape and length, and topology refers to spatial relationships among objects, such as adjacency. Management of spatial data requires some additional data types to represent a point, line, and region.</p>
<p><em>Generic spatial data types</em></p>
<table>
<thead>
<tr class="header">
<th align="left">Data type</th>
<th align="left">Dimensions</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Point</td>
<td align="left">0</td>
<td align="left">Scenic lookout</td>
</tr>
<tr class="even">
<td align="left">Line</td>
<td align="left">1</td>
<td align="left">River</td>
</tr>
<tr class="odd">
<td align="left">Region</td>
<td align="left">2</td>
<td align="left">County</td>
</tr>
</tbody>
</table>
<p>Consider the case where we want to create a database to store some details of political units. A political unit can have many boundaries. The United States, for example, has a boundary for the continental portion, one for Alaska, one for Hawaii, and many more to include places such as American Samoa. In its computer form, a boundary is represented by an ordered set of line segments (a path).</p>
<p><em>Data model for political units</em></p>
<p><img src="Figures/Chapter%2011/political%20unit.png" width="360" /></p>
<div id="sqlmm-spatial" class="section level3 unnumbered hasAnchor">
<h3>SQL/MM Spatial<a href="spatial-and-temporal-data-management.html#sqlmm-spatial" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>SQL/MM, also known as ISO 13249, is an extension of SQL to handle spatial data. It uses the prefix ST_ for tables, views, data types, and function names. Originally, this prefix meant <em>Spatial</em> and <em>Temporal</em>, because the intention was to develop a standard that combined spatial and temporal extensions to SQL. However, it was realized that temporal required a broader perspective and should be separate standard. Thus, think of ST_ as meaning <em>Spatial Type</em>.</p>
<p>MySQL has data types for storing geometric data, which are:</p>
<table>
<colgroup>
<col width="8%" />
<col width="26%" />
<col width="65%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Representation</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Point</td>
<td align="left">POINT(x y) | A point in space (e.g., a city’s</td>
<td align="left">location)</td>
</tr>
<tr class="even">
<td align="left">LineString</td>
<td align="left">LINESTRING(x1 y1,x2 y2,…)</td>
<td align="left">A sequence of points with linear interpolation between points (e.g., a road)</td>
</tr>
<tr class="odd">
<td align="left">Polygon</td>
<td align="left">POLYGON((x1 y1,x2 y2,…), (x1 y1,x2 y2,…))</td>
<td align="left">A polygon (e.g., a boundary) which has a single exterior boundary and zero or more interior boundaries ( i.e., no holes)</td>
</tr>
</tbody>
</table>
</div>
<div id="spatial-reference-support-system-srs" class="section level3 unnumbered hasAnchor">
<h3>Spatial Reference Support System (SRS)<a href="spatial-and-temporal-data-management.html#spatial-reference-support-system-srs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A spatial reference system (SRS) is facilitates the location of geometric objects using coordinates. A specific SRS is identified by an SRID, which is an integer</p>
<p>There are three types of reference systems:</p>
<div id="projected" class="section level4 unnumbered hasAnchor">
<h4>Projected<a href="spatial-and-temporal-data-management.html#projected" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A projected SRS is a projection of a globe on a flat surface. Map makers have developed a variety of approaches, such as Mecator, to represent a portion of the earth on a page or screen. Each point on the flat surface is a place on the globe. A projected SRS typically shows a length legend, such as the distance in miles or kilometers.</p>
</div>
<div id="geographic" class="section level4 unnumbered hasAnchor">
<h4>Geographic<a href="spatial-and-temporal-data-management.html#geographic" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For a geographic SRS, the coordinates are latitude and longitude. The SRID is 4326. <a href="data-administration.html#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a></p>
</div>
<div id="cartesian" class="section level4 unnumbered hasAnchor">
<h4>Cartesian<a href="spatial-and-temporal-data-management.html#cartesian" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A Cartesian SRS, is an infinite flat plane with no specified units. The SRID is O, and this is the default if you don’t specify an SRS.</p>
</div>
</div>
</div>
<div id="data-model-mapping" class="section level2 unnumbered hasAnchor">
<h2>Data model mapping<a href="spatial-and-temporal-data-management.html#data-model-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The data model in the preceding figure is mapped to MySQL. By specifying a SRID of 0, Ireland is represented in the following map using a Cartesian SRS. Since Ireland is small relative the size of the earth, this is a reasonable approximation.</p>
<p>In the following definition of the database’s tables, note two things. The boundpath column of boundary is defined with a data type of POLYGON and SRID of 0. The cityloc column of city is defined as a POINT. Otherwise, there is little new in the set of statements to create the tables.</p>
<p><em>Political unit database definition</em></p>
<div class="sourceCode" id="cb203"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb203-1"><a href="spatial-and-temporal-data-management.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> political_unit (</span>
<span id="cb203-2"><a href="spatial-and-temporal-data-management.html#cb203-2" aria-hidden="true" tabindex="-1"></a>    Unitname    <span class="dt">VARCHAR</span>(<span class="dv">30</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb203-3"><a href="spatial-and-temporal-data-management.html#cb203-3" aria-hidden="true" tabindex="-1"></a>    Unitcode    <span class="dt">CHAR</span>(<span class="dv">2</span>),</span>
<span id="cb203-4"><a href="spatial-and-temporal-data-management.html#cb203-4" aria-hidden="true" tabindex="-1"></a>    Unitpop   <span class="dt">DECIMAL</span>(<span class="dv">6</span>,<span class="dv">2</span>),</span>
<span id="cb203-5"><a href="spatial-and-temporal-data-management.html#cb203-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">PRIMARY</span> <span class="kw">KEY</span>(unitcode));</span></code></pre></div>
<div class="sourceCode" id="cb204"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb204-1"><a href="spatial-and-temporal-data-management.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> boundary (</span>
<span id="cb204-2"><a href="spatial-and-temporal-data-management.html#cb204-2" aria-hidden="true" tabindex="-1"></a>    Boundid   <span class="dt">INTEGER</span>,</span>
<span id="cb204-3"><a href="spatial-and-temporal-data-management.html#cb204-3" aria-hidden="true" tabindex="-1"></a>    Boundpath   POLYGON <span class="kw">NOT</span> <span class="kw">NULL</span> SRID <span class="dv">0</span>,</span>
<span id="cb204-4"><a href="spatial-and-temporal-data-management.html#cb204-4" aria-hidden="true" tabindex="-1"></a>    Unitcode    <span class="dt">CHAR</span>(<span class="dv">2</span>),</span>
<span id="cb204-5"><a href="spatial-and-temporal-data-management.html#cb204-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">PRIMARY</span> <span class="kw">KEY</span>(boundid),</span>
<span id="cb204-6"><a href="spatial-and-temporal-data-management.html#cb204-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">CONSTRAINT</span> fk_boundary_polunit <span class="kw">FOREIGN</span> <span class="kw">KEY</span>(unitcode)</span>
<span id="cb204-7"><a href="spatial-and-temporal-data-management.html#cb204-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">REFERENCES</span> political_unit(unitcode));</span></code></pre></div>
<div class="sourceCode" id="cb205"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb205-1"><a href="spatial-and-temporal-data-management.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> city (</span>
<span id="cb205-2"><a href="spatial-and-temporal-data-management.html#cb205-2" aria-hidden="true" tabindex="-1"></a>    Cityname    <span class="dt">VARCHAR</span>(<span class="dv">30</span>),</span>
<span id="cb205-3"><a href="spatial-and-temporal-data-management.html#cb205-3" aria-hidden="true" tabindex="-1"></a>    Cityloc   POINT <span class="kw">NOT</span> <span class="kw">NULL</span> SRID <span class="dv">0</span>,</span>
<span id="cb205-4"><a href="spatial-and-temporal-data-management.html#cb205-4" aria-hidden="true" tabindex="-1"></a>    Unitcode    <span class="dt">CHAR</span>(<span class="dv">2</span>),</span>
<span id="cb205-5"><a href="spatial-and-temporal-data-management.html#cb205-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">PRIMARY</span> <span class="kw">KEY</span>(unitcode,cityname),</span>
<span id="cb205-6"><a href="spatial-and-temporal-data-management.html#cb205-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">CONSTRAINT</span> fk_city_polunit <span class="kw">FOREIGN</span> <span class="kw">KEY</span>(unitcode)</span>
<span id="cb205-7"><a href="spatial-and-temporal-data-management.html#cb205-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">REFERENCES</span> political_unit(unitcode));</span></code></pre></div>
<p>We now use the geographic entity of Ireland to demonstrate the application of spatial concepts. The island has two political units. The Republic of Ireland (Eire) governs the south, while Northern Ireland, a part of the United Kingdom, is in the north.</p>
<p><em>Map of Ireland</em></p>
<p><img src="Figures/Chapter%2011/Ireland%20grid.png" /></p>
<p>To represent these two political units within a spatial database, we need to define their boundaries. Typically, this is done by approximating the boundary by a single exterior polygon. In the preceding figure, you see a very coarse representation based on connecting intersection points of the overlay grid. The SRID needs to be specified for each geometric object, as for example where it is set to 0 when specifying Dublin’s coordinates, <code>ST_GeomFROMText('POINT(9 6)', 0)</code>.</p>
<p><em>Insert statements for populating database</em></p>
<div class="sourceCode" id="cb206"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb206-1"><a href="spatial-and-temporal-data-management.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> political_unit <span class="kw">VALUES</span> (<span class="st">&#39;Republic of Ireland&#39;</span>,<span class="st">&#39;ie&#39;</span>, <span class="fl">3.9</span>);</span>
<span id="cb206-2"><a href="spatial-and-temporal-data-management.html#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> political_unit <span class="kw">VALUES</span> (<span class="st">&#39;Northern Ireland&#39;</span>,<span class="st">&#39;ni&#39;</span>, <span class="fl">1.7</span>);</span>
<span id="cb206-3"><a href="spatial-and-temporal-data-management.html#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> boundary <span class="kw">VALUES</span></span>
<span id="cb206-4"><a href="spatial-and-temporal-data-management.html#cb206-4" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span>,ST_GeomFROMText(<span class="st">&#39;POLYGON((9 8, 9 3, 4 1, 2 2, 1 3, 3 5, 3 6, 2 6,</span></span>
<span id="cb206-5"><a href="spatial-and-temporal-data-management.html#cb206-5" aria-hidden="true" tabindex="-1"></a><span class="st">     2 9, 5 9, 5 10, 6 11, 7 11, 7 10, 6 9, 7 8, 7 9, 8 9, 8 8, 9 8))&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ie&#39;</span>);</span>
<span id="cb206-6"><a href="spatial-and-temporal-data-management.html#cb206-6" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> boundary <span class="kw">VALUES</span></span>
<span id="cb206-7"><a href="spatial-and-temporal-data-management.html#cb206-7" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">2</span>,ST_GeomFROMText(<span class="st">&#39;POLYGON((7 11, 9 11, 10 9, 10 8, 8 8, 8 9, 7 9,</span></span>
<span id="cb206-8"><a href="spatial-and-temporal-data-management.html#cb206-8" aria-hidden="true" tabindex="-1"></a><span class="st">     7 8, 6 9, 7 10, 7 11))&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ni&#39;</span>);</span>
<span id="cb206-9"><a href="spatial-and-temporal-data-management.html#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Dublin&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(9 6)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ie&#39;</span>);</span>
<span id="cb206-10"><a href="spatial-and-temporal-data-management.html#cb206-10" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Cork&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(5 2)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ie&#39;</span>);</span>
<span id="cb206-11"><a href="spatial-and-temporal-data-management.html#cb206-11" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Limerick&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(4 4)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ie&#39;</span>);</span>
<span id="cb206-12"><a href="spatial-and-temporal-data-management.html#cb206-12" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Galway&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(4 6)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ie&#39;</span>);</span>
<span id="cb206-13"><a href="spatial-and-temporal-data-management.html#cb206-13" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Sligo&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(5 8)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ie&#39;</span>);</span>
<span id="cb206-14"><a href="spatial-and-temporal-data-management.html#cb206-14" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Tipperary&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(5 3)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ie&#39;</span>);</span>
<span id="cb206-15"><a href="spatial-and-temporal-data-management.html#cb206-15" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Belfast&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(9 9)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ni&#39;</span>);</span>
<span id="cb206-16"><a href="spatial-and-temporal-data-management.html#cb206-16" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> city <span class="kw">VALUES</span> (<span class="st">&#39;Londonderry&#39;</span>,ST_GeomFROMText(<span class="st">&#39;POINT(7 10)&#39;</span>, <span class="dv">0</span>),<span class="st">&#39;ni&#39;</span>);</span></code></pre></div>
<p>The two sets of values for the column <code>boundary</code> define the boundaries of the Republic of Ireland and Northern Ireland. Because of the coarseness of this sample mapping, the Republic of Ireland has only one boundary. A finer-grained mapping would have multiple boundaries, such as one to include the Arran Islands off the west coast near Galway. Each city’s location is defined by a point or pair of coordinates. <code>ST_GeomFromText</code> is an MySQL function to convert text into a geometry data form.</p>
<p>Workbench can show you the boundaries for you spatial database. See the following screenshot.</p>
<p><em>Boundary path as displayed by Workbench</em></p>
<p><img src="Figures/Chapter%2011/boundary.png" /></p>
<blockquote>
<p>❓ <em>Skill builder</em></p>
<p>Create the three tables for the example and insert the rows listed in the preceding SQL code.</p>
</blockquote>
<p>MySQL includes a number of geometry functions and operators for processing spatial data that simplify the writing of queries. A column’s SRID value determines the method of calculating area or distance. Euclidean geometry is use for a flat plane (SRID = 0), and spherical geometry for latitude and longitude measures (SRID = 4326). For illustrative purposes, just a few of the geometric functions are described.</p>
<p><em>Some MySQL geometric functions</em></p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ST_X(Point)</td>
<td align="left">The x-coordinate of a point</td>
</tr>
<tr class="even">
<td align="left">ST_Y(Point)</td>
<td align="left">The y-coordinate of a point</td>
</tr>
<tr class="odd">
<td align="left">ST_Distance(Point, Point)</td>
<td align="left">The distance between two points</td>
</tr>
<tr class="even">
<td align="left">ST_NumPoints(LineString)</td>
<td align="left">The number of points in a linestring</td>
</tr>
<tr class="odd">
<td align="left">ST_Area(Polygon)</td>
<td align="left">The area of a polygon</td>
</tr>
</tbody>
</table>
<p>Once the database is established, we can do some queries to gain an understanding of the additional capability provided by the spatial additions. Before starting, examine the scale on the map and note that one grid unit is about 37.5 kilometers (23 miles). This also means that the area of one grid unit is 1406 km (526 square miles).</p>
<p><em>What is the area of the Republic of Ireland?</em></p>
<p>Because we approximate the border by a polygon, we use the area function and multiply the result by 1406 to convert to square kilometers.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb207-1"><a href="spatial-and-temporal-data-management.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ST_AREA(boundpath)<span class="op">*</span><span class="dv">1406</span></span>
<span id="cb207-2"><a href="spatial-and-temporal-data-management.html#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AS</span> <span class="st">&#39;Area (km^2)&#39;</span> <span class="kw">FROM</span> political_unit <span class="kw">JOIN</span> boundary</span>
<span id="cb207-3"><a href="spatial-and-temporal-data-management.html#cb207-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">ON</span> political_unit.unitcode <span class="op">=</span> boundary.unitcode</span>
<span id="cb207-4"><a href="spatial-and-temporal-data-management.html#cb207-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">WHERE</span> unitname <span class="op">=</span> <span class="st">&#39;Republic of Ireland&#39;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-199">Table 11.1: </span>1 records</caption>
<thead>
<tr class="header">
<th align="right">Area (km^2)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">71706</td>
</tr>
</tbody>
</table>
</div>
<p><em>How far, as the crow flies, is it from Sligo to Dublin?</em></p>
<p>You can measure the distance between two points using ST_Distance. You will need to multiply the result by 37.5 or 23 to convert to kilometers or miles, respectively.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb208-1"><a href="spatial-and-temporal-data-management.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="kw">WITH</span></span>
<span id="cb208-2"><a href="spatial-and-temporal-data-management.html#cb208-2" aria-hidden="true" tabindex="-1"></a>  orig <span class="kw">AS</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> city),</span>
<span id="cb208-3"><a href="spatial-and-temporal-data-management.html#cb208-3" aria-hidden="true" tabindex="-1"></a>  dest <span class="kw">AS</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> city)</span>
<span id="cb208-4"><a href="spatial-and-temporal-data-management.html#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ST_Distance(orig.cityloc,dest.cityloc)<span class="op">*</span><span class="fl">37.5</span>  <span class="kw">AS</span> <span class="ot">&quot;Distance (kms)&quot;</span></span>
<span id="cb208-5"><a href="spatial-and-temporal-data-management.html#cb208-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> orig, dest</span>
<span id="cb208-6"><a href="spatial-and-temporal-data-management.html#cb208-6" aria-hidden="true" tabindex="-1"></a>     <span class="kw">WHERE</span> orig.cityname <span class="op">=</span> <span class="st">&#39;Sligo&#39;</span></span>
<span id="cb208-7"><a href="spatial-and-temporal-data-management.html#cb208-7" aria-hidden="true" tabindex="-1"></a>     <span class="kw">AND</span> dest.cityname <span class="op">=</span> <span class="st">&#39;Dublin&#39;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-200">Table 11.2: </span>1 records</caption>
<thead>
<tr class="header">
<th align="right">Distance (kms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">167.7051</td>
</tr>
</tbody>
</table>
</div>
<p><em>What is the closest city to Limerick?</em></p>
<p>This query has a familiar structure. The inner query determines the minimum distance between Limerick and other cities. Notice that there is a need to exclude comparing the distance from Limerick to itself, which is zero.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb209-1"><a href="spatial-and-temporal-data-management.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="kw">WITH</span></span>
<span id="cb209-2"><a href="spatial-and-temporal-data-management.html#cb209-2" aria-hidden="true" tabindex="-1"></a>  orig <span class="kw">AS</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> city),</span>
<span id="cb209-3"><a href="spatial-and-temporal-data-management.html#cb209-3" aria-hidden="true" tabindex="-1"></a>  dest <span class="kw">AS</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> city)</span>
<span id="cb209-4"><a href="spatial-and-temporal-data-management.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> dest.cityname <span class="kw">FROM</span> orig, dest</span>
<span id="cb209-5"><a href="spatial-and-temporal-data-management.html#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> orig.cityname <span class="op">=</span> <span class="st">&#39;Limerick&#39;</span></span>
<span id="cb209-6"><a href="spatial-and-temporal-data-management.html#cb209-6" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> ST_Distance(orig.cityloc,dest.cityloc)<span class="op">=</span></span>
<span id="cb209-7"><a href="spatial-and-temporal-data-management.html#cb209-7" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> <span class="fu">MIN</span>(ST_Distance(orig.cityloc,dest.cityloc))</span>
<span id="cb209-8"><a href="spatial-and-temporal-data-management.html#cb209-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> city orig, city dest</span>
<span id="cb209-9"><a href="spatial-and-temporal-data-management.html#cb209-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> orig.cityname <span class="op">=</span> <span class="st">&#39;Limerick&#39;</span> <span class="kw">AND</span> dest.cityname <span class="op">&lt;&gt;</span> <span class="st">&#39;Limerick&#39;</span>);</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-201">Table 11.3: </span>1 records</caption>
<thead>
<tr class="header">
<th align="left">Cityname</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Tipperary</td>
</tr>
</tbody>
</table>
</div>
<p><em>What is the westernmost city in Ireland?</em></p>
<p>The first thing to recognize is that by convention west is shown on the left side of the map, which means the westernmost city will have the smallest x-coordinate.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb210-1"><a href="spatial-and-temporal-data-management.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="kw">WITH</span></span>
<span id="cb210-2"><a href="spatial-and-temporal-data-management.html#cb210-2" aria-hidden="true" tabindex="-1"></a>  west <span class="kw">AS</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> city),</span>
<span id="cb210-3"><a href="spatial-and-temporal-data-management.html#cb210-3" aria-hidden="true" tabindex="-1"></a>  other <span class="kw">AS</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> city)</span>
<span id="cb210-4"><a href="spatial-and-temporal-data-management.html#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> west.cityname <span class="kw">FROM</span>  west</span>
<span id="cb210-5"><a href="spatial-and-temporal-data-management.html#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span></span>
<span id="cb210-6"><a href="spatial-and-temporal-data-management.html#cb210-6" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span>  other <span class="kw">WHERE</span> ST_X(other.cityloc) <span class="op">&lt;</span> ST_X(west.cityloc));</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-202">Table 11.4: </span>2 records</caption>
<thead>
<tr class="header">
<th align="left">Cityname</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Galway</td>
</tr>
<tr class="even">
<td align="left">Limerick</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>❓ <em>Skill builder</em></p>
<ol style="list-style-type: decimal">
<li><p>What is the area of Northern Ireland? Because Northern Ireland is part of the United Kingdom and miles are still often used to measure distances, report the area in square miles.</p></li>
<li><p>What is the direct distance from Belfast to Londonderry in miles?</p></li>
<li><p>What is the northernmost city of the Republic of Ireland?</p></li>
</ol>
</blockquote>
<div id="geometry-collections" class="section level3 unnumbered hasAnchor">
<h3>Geometry collections<a href="spatial-and-temporal-data-management.html#geometry-collections" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A geometry collection is a data type for describing one or more geometries. It covers multiple points, strings, polygons, as well as their possible combinations.</p>
<div id="multipoint" class="section level4 unnumbered hasAnchor">
<h4>MultiPoint<a href="spatial-and-temporal-data-management.html#multipoint" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The multipoint data type records information about a set of points, such as the bus stops on campus. For example:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb211-1"><a href="spatial-and-temporal-data-management.html#cb211-1" aria-hidden="true" tabindex="-1"></a>MULTIPOINT(<span class="fl">9.0</span> <span class="fl">6.1</span>, <span class="fl">8.9</span> <span class="fl">6.0</span>)</span></code></pre></div>
</div>
<div id="multilinestring" class="section level4 unnumbered hasAnchor">
<h4>MultiLineString<a href="spatial-and-temporal-data-management.html#multilinestring" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The MultiLineString data type records information about a set of line strings, such as the bus routes on campus. For example:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb212-1"><a href="spatial-and-temporal-data-management.html#cb212-1" aria-hidden="true" tabindex="-1"></a>MULTILINESTRING((<span class="dv">9</span> <span class="dv">6</span>, <span class="dv">4</span> <span class="dv">6</span>), (<span class="dv">9</span> <span class="dv">6</span>, <span class="dv">5</span> <span class="dv">2</span>))</span></code></pre></div>
</div>
<div id="multipolygon" class="section level4 unnumbered hasAnchor">
<h4>MULTIPOLYGON<a href="spatial-and-temporal-data-management.html#multipolygon" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The MultiPOLYGON data type records information about a set of polygons, such as the shapes of the buildings on campus. For example:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb213-1"><a href="spatial-and-temporal-data-management.html#cb213-1" aria-hidden="true" tabindex="-1"></a>MULTIPOLYGON(((<span class="dv">0</span> <span class="dv">0</span>,<span class="dv">10</span> <span class="dv">0</span>,<span class="dv">10</span> <span class="dv">10</span>,<span class="dv">0</span> <span class="dv">10</span>,<span class="dv">0</span> <span class="dv">0</span>)),((<span class="dv">5</span> <span class="dv">5</span>,<span class="dv">7</span> <span class="dv">5</span>,<span class="dv">7</span> <span class="dv">7</span>,<span class="dv">5</span> <span class="dv">7</span>, <span class="dv">5</span> <span class="dv">5</span>)))</span></code></pre></div>
</div>
<div id="geometrycollection" class="section level4 unnumbered hasAnchor">
<h4>GEOMETRYCOLLECTION<a href="spatial-and-temporal-data-management.html#geometrycollection" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The GEOMETRYCOLLECTION data type records information about a collection of geometries, such as the bus routes and stops on campus. For example:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb214-1"><a href="spatial-and-temporal-data-management.html#cb214-1" aria-hidden="true" tabindex="-1"></a>GEOMETRYCOLLECTION(LINESTRING(<span class="dv">15</span> <span class="dv">15</span>, <span class="dv">20</span> <span class="dv">20</span>), POINT(<span class="dv">10</span> <span class="dv">10</span>), POINT(<span class="dv">30</span> <span class="dv">30</span>))</span></code></pre></div>
<p>You can insert data using <code>ST_GeomCollFromText</code>, as the following example illustrates:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb215-1"><a href="spatial-and-temporal-data-management.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> <span class="kw">table</span> <span class="kw">VALUES</span></span>
<span id="cb215-2"><a href="spatial-and-temporal-data-management.html#cb215-2" aria-hidden="true" tabindex="-1"></a>ST_GeomCollFromText(<span class="st">&#39;GEOMETRYCOLLECTION(POINT(1 1),LINESTRING(0 0,1 1,2 2,3 3,4 4))&#39;</span>);</span></code></pre></div>
<blockquote>
<p>❓ <em>Skill builder</em></p>
<p>Modify the example database design to include:</p>
<ol style="list-style-type: decimal">
<li><p>Historic buildings in a city</p></li>
<li><p>Walking paths in a city</p></li>
<li><p>Use of the MULTIPOLYGON data type to indicate a political region’s boundary</p></li>
</ol>
</blockquote>
</div>
</div>
<div id="geocoding-using-google-maps" class="section level3 unnumbered hasAnchor">
<h3>Geocoding using Google Maps<a href="spatial-and-temporal-data-management.html#geocoding-using-google-maps" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To get the latitude and longitude of a location, you can use Google Maps by following this procedure.</p>
<ol style="list-style-type: decimal">
<li><p>Go to maps.google.com.</p></li>
<li><p>Enter your address, zip code, airport code, or whatever you wish to geocode.</p></li>
<li><p>Click on the link that says ‘link to this page.’ It is on the right side, just above the upper right corner of the map.</p></li>
<li><p>The address bar (URL) will change. Examine the full link. For example: <a href="https://www.google.com/maps/place/Athens-Ben+Epps+Airport+-+AHN/@33.9519038,-83.3273184,17z/data=!3m1!4b1!4m5!3m4!1s0x88f66b676ce4ce85:0x749d5ade6813b384!8m2!3d33.9519038!4d-83.3251297" class="uri">https://www.google.com/maps/place/Athens-Ben+Epps+Airport+-+AHN/@33.9519038,-83.3273184,17z/data=!3m1!4b1!4m5!3m4!1s0x88f66b676ce4ce85:0x749d5ade6813b384!8m2!3d33.9519038!4d-83.3251297</a>.</p></li>
<li><p>The latitude and longitude are contained in the URL following AHN/@. In this case, latitude is: 33.9519038 and longitude: –83.3273184.</p></li>
</ol>
</div>
</div>
<div id="r-tree" class="section level2 unnumbered hasAnchor">
<h2>R-tree<a href="spatial-and-temporal-data-management.html#r-tree" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Conventional RDBMSs were developed to handle one-dimensional data (numbers and text strings). In a spatial database, points, lines, and rectangles may be used to represent the location of retail outlets, roads, utilities, and land parcels. Such data objects are represented by sets of <em>x, y</em> or <em>x, y, z</em> coordinates. Other applications requiring the storage of spatial data include computer-aided design (CAD), robotics, and computer vision.</p>
<p>The B-tree, often used to store data in one-dimensional databases, can be extended to <em>n</em> dimensions, where <em>n</em> ≥ 2. This extension of the B-tree is called an <strong>R-tree</strong>. As well as storing pointers to records in the sequence set, an R-tree also stores boundary data for each object. For a two-dimensional application, the boundary data are the <em>x</em> and <em>y</em> coordinates of the lower left and upper-right corners of the <em>minimum bounding</em> rectangle, the smallest possible rectangle enclosing the object. The index set, which contains pointers to lower-level nodes as in a B-tree, also contains data for the minimum bounding rectangle enclosing the objects referenced in the node. The data in an R-tree permit answers to such problems as <em>Find all pizza stores within 5 miles of the dorm.</em></p>
<p>How an R-tree stores data is illustrated in the following figure, which depicts five two-dimensional objects labeled A, B, C, D, and E. Each object is represented by its minimum bounding rectangle (the objects could be some other form, such as a circle). Data about these objects are stored in the sequence set. The index set contains details of two intermediate rectangles: X and Y. X fully encloses A, B, and C. Y fully encloses D and E.</p>
<p><em>An R-tree with sample spatial data</em></p>
<p><img src="Figures/Chapter%2011/r-tree.png" /></p>
<p>An example demonstrates how these data are used to accelerate searching. Using a mouse, a person could outline a region on a map displayed on a screen. The minimum bounding rectangle for this region would then be determined and the coordinates used to locate geographic objects falling within the minimum boundary. Because an R-tree is an index, geographic objects falling within a region can be found rapidly. In the following figure, the drawn region (it shaded) completely covers object E. The R-tree software would determine that the required object falls within intermediate region Y, and thus takes the middle node at the next level of the R-tree. Then, by examining coordinates in this node, it would determine that E is the required object.</p>
<p><em>Searching an R-tree</em></p>
<p><img src="Figures/Chapter%2011/searching-r-tree.png" /></p>
<p>As the preceding example illustrates, an R-tree has the same index structure as a B-tree. An R-tree stores data about <em>n</em>-dimensional objects in each node, whereas a B-tree stores data about a one-dimensional data type in each node. Both also store pointers to the next node in the tree (the index set) or the record (the sequence set).</p>
<p>This short introduction to spatial data has given you some idea of how the relational model can be extended to support geometric information. Most of the major RDBMS vendors support management of spatial data.</p>
</div>
<div id="managing-temporal-data" class="section level2 unnumbered hasAnchor">
<h2>Managing temporal data<a href="spatial-and-temporal-data-management.html#managing-temporal-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With a temporal database, stored data have an associated time period indicating when the item was valid or stored in the database. By attaching a timestamp to data, it becomes possible to store and identify different database states and support queries comparing these states. Thus, you might be able to determine the number of seats booked on a flight by 3 p.m. on January 21, 2011, and compare that to the number booked by 3 p.m. on January 22, 2011.</p>
<p>To appreciate the value of a temporal database, you need to know the difference between transaction and valid time and that bitemporal data combines both valid and transaction time.</p>
<ul>
<li><p><strong>Transaction time</strong> is the timestamp applied by the system when data are entered and cannot be changed by an application. It can be applied to a particular item or row. For example, when changing the price of a product, one approach might be to update the existing product row with the new price. The old price would be lost unless it was stored explicitly. In contrast, with a temporal database, the old and new prices would automatically have separate timestamps. In effect, an additional row is inserted to store the new price and the time when the insert occurred. In a database, <strong>immmutable data</strong> cannot be (or shouldn’t be) deleted or modified. Most traditional databases store data in a <strong>mutable</strong> format, meaning the database overwrites the older data when new data is available.</p></li>
<li><p><strong>Valid time</strong> is the actual time at which an item was or will be a valid or true value. Consider the case where a firm plans to increase its prices on a specified date. It might post new prices some time before their effective date. Valid time can be changed by an application.</p></li>
<li><p><strong>Bitemporal data</strong> records both the <a href="http://en.wikipedia.org/wiki/Valid_time">valid time</a> and <a href="http://en.wikipedia.org/wiki/Transaction_time">transaction time</a> for a fact. It usually requires four extra columns to record the upper and lower bounds for valid time and transaction time.</p></li>
</ul>
<p>Valid time records when the change will take effect, and transaction time records when the change was entered. Storing transaction time is essential for database recovery because the DMBS can roll back the database to a previous state. Valid time provides a historical record of the state of the database. Both forms of time are necessary for a temporal database.</p>
<p>As you might expect, a temporal database will be somewhat larger than a traditional database because data are immmutable or never discarded, and new timestamped values are inserted so that there is a complete history of the values of an instance (e.g., the price of a product since it was first entered in the database). Thus, you can think of most of the databases we have dealt with previously as snapshots of a particular state of the database, whereas a temporal database is a record of all states of the database. As disk storage becomes increasingly cheaper and firms recognize the value of business intelligence, we are likely to see more attention paid to temporal database technology.</p>
<div id="times-remembered" class="section level3 unnumbered hasAnchor">
<h3>Times remembered<a href="spatial-and-temporal-data-management.html#times-remembered" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>SQL supports several different data types for storing numeric values (e.g., integer and float), and a temporal database also needs a variety of data types for storing time values. The first level of distinction is to determine whether the time value is anchored or unanchored. <strong>Anchored time</strong> has a defined starting point (e.g., October 15, 1582), and <strong>unanchored time</strong> is a block of time with no specified start (e.g., 45 minutes).</p>
<p><em>Types of temporal data</em><a href="data-administration.html#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a></p>
<p><img src="Figures/Chapter%2011/temporal%20data.png" /></p>
<p>Anchored time is further split into an instant or interval. An <strong>instant</strong> is a moment in time (e.g., a date and time). In SQL, an instant can be represented by a date, time, or timestamp data type. An <strong>interval</strong> is the time between two specified instants, and can be defined as a value or a range with an upper and lower bound instant. For example, <span class="math display">\[2011-01-01, 2011-01-23\]</span> defines an interval in 2011 beginning January 1 and ending January 23.</p>
<div id="interval" class="section level4 unnumbered hasAnchor">
<h4>Interval<a href="spatial-and-temporal-data-management.html#interval" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>SQL-99 introduced the INTERVAL data type, which has not yet been implemented in MySQL. INTERVAL is a single value expressed in some unit or units of time (e.g., 6 years, 5 days, 7 hours). A small example illustrates the use of INTERVAL for time values. Consider the rotational and orbital periods of the planets . The CREATE statement for this table is</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb216-1"><a href="spatial-and-temporal-data-management.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> planet (</span>
<span id="cb216-2"><a href="spatial-and-temporal-data-management.html#cb216-2" aria-hidden="true" tabindex="-1"></a>    pltname         <span class="dt">VARCHAR</span>(<span class="dv">7</span>),</span>
<span id="cb216-3"><a href="spatial-and-temporal-data-management.html#cb216-3" aria-hidden="true" tabindex="-1"></a>    pltday        <span class="dt">INTERVAL</span>,</span>
<span id="cb216-4"><a href="spatial-and-temporal-data-management.html#cb216-4" aria-hidden="true" tabindex="-1"></a>    pltyear         <span class="dt">INTERVAL</span>,</span>
<span id="cb216-5"><a href="spatial-and-temporal-data-management.html#cb216-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">PRIMARY</span> <span class="kw">KEY</span>(pltname));</span></code></pre></div>
<p><em>Planetary data</em></p>
<table>
<thead>
<tr class="header">
<th align="left">Planet</th>
<th align="right">Rotational period (hours)</th>
<th align="right">Orbital period (hours)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mercury</td>
<td align="right">1407.51</td>
<td align="right">0.24</td>
</tr>
<tr class="even">
<td align="left">Venus</td>
<td align="right">–5832.44<a href="data-administration.html#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a></td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Earth</td>
<td align="right">23.93</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Mars</td>
<td align="right">24.62</td>
<td align="right">1.88</td>
</tr>
<tr class="odd">
<td align="left">Jupiter</td>
<td align="right">9.92</td>
<td align="right">11.86</td>
</tr>
<tr class="even">
<td align="left">Saturn</td>
<td align="right">10.66</td>
<td align="right">29.45</td>
</tr>
<tr class="odd">
<td align="left">Uranus</td>
<td align="right">17.24</td>
<td align="right">84.02</td>
</tr>
<tr class="even">
<td align="left">Neptune</td>
<td align="right">16.11</td>
<td align="right">164.79</td>
</tr>
<tr class="odd">
<td align="left">Pluto</td>
<td align="right">153.28</td>
<td align="right">247.92</td>
</tr>
</tbody>
</table>
<p>To insert the values for Mercury, you would use</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb217-1"><a href="spatial-and-temporal-data-management.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> planet <span class="kw">VALUES</span> (<span class="st">&#39;Mercury&#39;</span>,<span class="st">&#39;1407.51 hours&#39;</span>,<span class="st">&#39;0.24 years&#39;</span>);</span></code></pre></div>
</div>
<div id="modeling-temporal-data" class="section level4 unnumbered hasAnchor">
<h4>Modeling temporal data<a href="spatial-and-temporal-data-management.html#modeling-temporal-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You already have the tools for modeling temporal values. For example, the project management data model discussed in Chapter 7 and reproduced in the following figure contains temporal data.</p>
<p><em>A project management data model</em></p>
<p><img src="Figures/Chapter%207/planning%20revised.png" /></p>
<p>If we take the SHARE entity introduced very early in your data modeling experience, we can add temporal information to record the history of all values that are time-varying (i.e., price, quantity, dividend, and earnings). The data model to record temporal data is displayed. Firms pay dividends and report earnings only a few times per year, so we can associate a date with each value of dividend and earnings. Recording the history of trading transactions requires a timestamp, because a person can make multiple trades in a day. Every time a share is bought or sold, a new row is inserted containing both the transaction quantity and price. The number owned can be derived by using SUM.</p>
<p><em>A temporal model of SHARE</em></p>
<p><img src="Figures/Chapter%2011/nation-stock%20temporal.png" /></p>
<p>Recording the share’s price requires further consideration. If the intention is to record every change in price, then a time stamp is required as there will be multiple price changes in a day, and even in an few minutes, in busy trading. If there is less interest in the volatility of the stock and only the closing price for each day is of interest, then a date would be recorded.</p>
<p>You can add additional attributes to tables in a relational database to handle temporal data, but doing so does not make it a temporal database. The problem is that current relational implementations do not have built-in functions for querying time-varying data. Such queries can be difficult to specify in SQL.</p>
<p>A temporal database has additional features for temporal data definition, constraint specification, data manipulation, and querying. A step in this direction is the development of TSQL (Temporal Structured Query Language). Based on SQL, TSQL supports querying of temporal databases without specifying time-varying criteria. SQL:2011, the seventh revision of the SQL standard, has improved support for temporal data.</p>
</div>
</div>
<div id="summary-11" class="section level3 unnumbered hasAnchor">
<h3>Summary<a href="spatial-and-temporal-data-management.html#summary-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Spatial database technology stores details about items that have geometric features. It supports additional data types to describe these features, and has functions and operators to support querying. The new data types support point, line, and region values. Spatial technology is likely to develop over the next few years to support organizations offering localized information services.</p>
<p>Temporal database technology provides data types and functions for managing time-varying data. Transaction time and valid time are two characteristics of temporal data. Times can be anchored or unanchored and measured as an instant or as an interval.</p>
</div>
</div>
<div id="key-terms-and-concepts-8" class="section level2 unnumbered hasAnchor">
<h2>Key terms and concepts<a href="spatial-and-temporal-data-management.html#key-terms-and-concepts-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<table>
<tbody>
<tr class="odd">
<td align="left">Anchored time</td>
<td align="left">R-tree</td>
</tr>
<tr class="even">
<td align="left">Geographic object</td>
<td align="left">Spatial data</td>
</tr>
<tr class="odd">
<td align="left">Geographic information system (GIS)</td>
<td align="left">Temporal data</td>
</tr>
<tr class="even">
<td align="left">Immutable</td>
<td align="left">Theme</td>
</tr>
<tr class="odd">
<td align="left">Interval</td>
<td align="left">Transaction time</td>
</tr>
<tr class="even">
<td align="left">Map</td>
<td align="left">Valid time</td>
</tr>
<tr class="odd">
<td align="left">Mutable</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div id="references-and-additional-readings-6" class="section level3 unnumbered hasAnchor">
<h3>References and additional readings<a href="spatial-and-temporal-data-management.html#references-and-additional-readings-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Gibson, Rich, and Schuyler Erle. 2006. <em>Google maps hacks</em>. Sebastopol, CA: O’Reilly.</p>
<p>Rigaux, P., M. O. Scholl, and A. Voisard. 2002. <em>Spatial databases: with application to GIS</em>, The Morgan Kaufmann series in data management systems. San Francisco: Morgan Kaufmann Publishers.</p>
</div>
</div>
<div id="exercises-11" class="section level2 unnumbered hasAnchor">
<h2>Exercises<a href="spatial-and-temporal-data-management.html#exercises-11" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>What circumstances will lead to increased use of spatial data?</p></li>
<li><p>A national tourist bureau has asked you to design a database to record details of items of interest along a scenic road. What are some of the entities you might include? How would you model a road? Draw the data model.</p></li>
<li><p>Using the map of the Iberian peninsula in the following figure, populate the spatial database with details of Andorra, Portugal, and Spain. Answer the following questions.</p>
<ol style="list-style-type: lower-alpha">
<li><p>What is the direct distance, or bee line, from Lisbon to Madrid?</p></li>
<li><p>What is the farthest Spanish city from Barcelona?</p></li>
<li><p>Imagine you get lost in Portugal and your geographic positioning system (GPS) indicates that your coordinates are (3,9). What is the nearest city?</p></li>
<li><p>Are there any Spanish cities west of Braga?</p></li>
<li><p>What is the area of Portugal?</p></li>
<li><p>What is the southernmost city of Portugal?</p></li>
</ol></li>
<li><p>Redesign the data model for political units assuming that your relational database does not support point and polygon data types.</p></li>
<li><p>For more precision and to meet universal standards, it would be better to use latitude and longitude to specify points and paths. You should also recognize that Earth is a globe and not flat. How would you enter latitude and longitude in MySQL?</p></li>
<li><p>When might you use transaction time and when might you use valid time?</p></li>
<li><p>Design a database to report basketball scores. How would you record time?</p></li>
<li><p>A supermarket chain has asked you to record what goods customers buy during each visit. In other words, you want details of each shopping basket. It also wants to know when each purchase was made. Design the database.</p></li>
<li><p>An online auction site wants to keep track of the bids for each item that a supplier sells. Design the database.</p></li>
<li><p>Complete the Google maps lab exercise listed on the book’s Web site.</p></li>
</ol>
<p><em>Iberian Peninsula</em></p>
<p><img src="Figures/Chapter%2011/Iberia-grid.png" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="section-3-advanced-data-management.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graph-databases.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DataManagement.pdf", "DataManagement.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
