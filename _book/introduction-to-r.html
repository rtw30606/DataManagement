<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 15 Introduction to R | DataManagement.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 15 Introduction to R | DataManagement.knit" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 15 Introduction to R | DataManagement.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="organizational-intelligence.html"/>
<link rel="next" href="data-visualization-1.html"/>
<script src="libs/header-attrs-2.12/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="data-management-databases-and-organizations.html#data-management-databases-and-organizations">Data Management: Databases and Organizations<span></span></a></li>
<li><a href="preface.html#preface">Preface<span></span></a>
<ul>
<li><a href="preface.html#supplements">Supplements<span></span></a></li>
<li><a href="preface.html#acknowledgments">Acknowledgments<span></span></a></li>
</ul></li>
<li><a href="section-1-the-managerial-perspective.html#section-1-the-managerial-perspective">Section 1 The Managerial Perspective<span></span></a></li>
<li class="chapter" data-level="1" data-path="managing-data.html"><a href="managing-data.html"><i class="fa fa-check"></i><b>1</b> Managing Data<span></span></a>
<ul>
<li><a href="managing-data.html#introduction">Introduction<span></span></a></li>
<li><a href="managing-data.html#individual-data-management">Individual data management<span></span></a></li>
<li><a href="managing-data.html#organizational-data-management">Organizational data management<span></span></a></li>
<li><a href="managing-data.html#problems-with-data-management-systems">Problems with data management systems<span></span></a></li>
<li><a href="managing-data.html#a-brief-history-of-data-management-systems">A brief history of data management systems<span></span></a></li>
<li><a href="managing-data.html#data-information-and-knowledge">Data, information, and knowledge<span></span></a></li>
<li><a href="managing-data.html#the-challenge">The challenge<span></span></a></li>
<li><a href="managing-data.html#exercises">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="information.html"><a href="information.html"><i class="fa fa-check"></i><b>2</b> Information<span></span></a>
<ul>
<li><a href="information.html#introduction-1">Introduction<span></span></a></li>
<li><a href="information.html#a-historical-perspective">A historical perspective<span></span></a></li>
<li><a href="information.html#a-brief-history-of-information-systems">A brief history of information systems<span></span></a></li>
<li><a href="information.html#information-characteristics">Information characteristics<span></span></a></li>
<li><a href="information.html#information-and-organizational-change">Information and organizational change<span></span></a></li>
<li><a href="information.html#information-and-managerial-work">Information and managerial work<span></span></a></li>
<li><a href="information.html#managers-information-requirements">Managers’ information requirements<span></span></a></li>
<li><a href="information.html#information-delivery-systems">Information delivery systems<span></span></a></li>
<li><a href="information.html#information-integration">Information integration<span></span></a></li>
<li><a href="information.html#knowledge-1">Knowledge<span></span></a></li>
<li><a href="information.html#exercises-1">Exercises<span></span></a></li>
</ul></li>
<li><a href="section-2-data-modeling-and-sql.html#section-2-data-modeling-and-sql">Section 2 Data Modeling and SQL<span></span></a></li>
<li class="chapter" data-level="3" data-path="the-single-entity.html"><a href="the-single-entity.html"><i class="fa fa-check"></i><b>3</b> The Single Entity<span></span></a>
<ul>
<li><a href="the-single-entity.html#the-relational-model">The relational model<span></span></a></li>
<li><a href="the-single-entity.html#getting-started">Getting started<span></span></a></li>
<li><a href="the-single-entity.html#modeling-a-single-entity-database">Modeling a single-entity database<span></span></a></li>
<li><a href="the-single-entity.html#creating-a-single-table-database">Creating a single-table database<span></span></a></li>
<li><a href="the-single-entity.html#querying-a-single-table-database">Querying a single-table database<span></span></a></li>
<li><a href="the-single-entity.html#exercises-2">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-one-to-many-relationship.html"><a href="the-one-to-many-relationship.html"><i class="fa fa-check"></i><b>4</b> The One-to-Many Relationship<span></span></a>
<ul>
<li><a href="the-one-to-many-relationship.html#relationships">Relationships<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#creating-a-database-with-a-1m-relationship">Creating a database with a 1:m relationship<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#querying-a-two-table-database">Querying a two-table database<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#regular-expressionpattern-matching-1">Regular expression—pattern matching<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#subqueries-1">Subqueries<span></span></a></li>
<li><a href="the-one-to-many-relationship.html#exercises-3">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-many-to-many-relationship.html"><a href="the-many-to-many-relationship.html"><i class="fa fa-check"></i><b>5</b> The Many-to-Many Relationship<span></span></a>
<ul>
<li><a href="the-many-to-many-relationship.html#the-many-to-many-relationship-1">The many-to-many relationship<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#creating-a-relational-database-with-an-mm-relationship">Creating a relational database with an m:m relationship<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#querying-an-mm-relationship">Querying an m:m relationship<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#key-terms-and-concepts-2">Key terms and concepts<span></span></a></li>
<li><a href="the-many-to-many-relationship.html#exercises-4">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="one-to-one-and-recursive-relationships.html"><a href="one-to-one-and-recursive-relationships.html"><i class="fa fa-check"></i><b>6</b> One-to-One and Recursive Relationships<span></span></a>
<ul>
<li><a href="one-to-one-and-recursive-relationships.html#modeling-a-one-to-one-relationship">Modeling a one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-one-to-one-relationship">Mapping a one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-recursive-one-to-many-relationship">Mapping a recursive one-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-one-to-one-relationship">Querying a one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-recursive-1m-relationship">Querying a recursive 1:m relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#modeling-a-recursive-one-to-one-relationship">Modeling a recursive one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-recursive-one-to-one-relationship">Mapping a recursive one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-recursive-one-to-one-relationship">Querying a recursive one-to-one relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#modeling-a-recursive-many-to-many-relationship">Modeling a recursive many-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#mapping-a-recursive-many-to-many-relationship">Mapping a recursive many-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#querying-a-recursive-many-to-many-relationship">Querying a recursive many-to-many relationship<span></span></a></li>
<li><a href="one-to-one-and-recursive-relationships.html#exercises-5">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-modeling.html"><a href="data-modeling.html"><i class="fa fa-check"></i><b>7</b> Data Modeling<span></span></a>
<ul>
<li><a href="data-modeling.html#modeling">Modeling<span></span></a></li>
<li><a href="data-modeling.html#data-modeling-1">Data modeling<span></span></a></li>
<li><a href="data-modeling.html#data-model-quality">Data model quality<span></span></a></li>
<li><a href="data-modeling.html#quality-improvement">Quality improvement<span></span></a></li>
<li><a href="data-modeling.html#data-modeling-hints">Data modeling hints<span></span></a></li>
<li><a href="data-modeling.html#the-seven-habits-of-highly-effective-data-modelers">The seven habits of highly effective data modelers<span></span></a></li>
<li><a href="data-modeling.html#exercises-6">Exercises<span></span></a></li>
</ul></li>
<li><a href="reference-1-basic-structures.html#reference-1-basic-structures">Reference 1: Basic Structures<span></span></a>
<ul>
<li><a href="reference-1-basic-structures.html#one-entity">One entity<span></span></a></li>
<li><a href="reference-1-basic-structures.html#two-entities">Two entities<span></span></a></li>
<li><a href="reference-1-basic-structures.html#another-entitys-identifier-as-part-of-the-identifier">Another entity’s identifier as part of the identifier<span></span></a></li>
<li><a href="reference-1-basic-structures.html#exercises-7">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="normalization-and-other-data-modeling-methods.html"><a href="normalization-and-other-data-modeling-methods.html"><i class="fa fa-check"></i><b>8</b> Normalization and Other Data Modeling Methods<span></span></a>
<ul>
<li><a href="normalization-and-other-data-modeling-methods.html#multiple-paths">Multiple paths<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#normalization">Normalization<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#other-data-modeling-methods">Other data modeling methods<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#key-terms-and-concepts-5">Key terms and concepts<span></span></a></li>
<li><a href="normalization-and-other-data-modeling-methods.html#exercises-8">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-relational-model-and-relational-algebra.html"><a href="the-relational-model-and-relational-algebra.html"><i class="fa fa-check"></i><b>9</b> The Relational Model and Relational Algebra<span></span></a>
<ul>
<li><a href="the-relational-model-and-relational-algebra.html#background">Background<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#data-structures">Data structures<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#integrity-rules">Integrity rules<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#manipulation-languages">Manipulation languages<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#a-fully-relational-database">A fully relational database<span></span></a></li>
<li><a href="the-relational-model-and-relational-algebra.html#exercises-9">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="sql.html"><a href="sql.html"><i class="fa fa-check"></i><b>10</b> SQL<span></span></a>
<ul>
<li><a href="sql.html#structured-query-language">Structured query language<span></span></a></li>
<li><a href="sql.html#creating-a-table">Creating a table<span></span></a></li>
<li><a href="sql.html#data-types">Data types<span></span></a></li>
<li><a href="sql.html#collation-sequence">Collation sequence<span></span></a></li>
<li><a href="sql.html#scalar-functions">Scalar functions<span></span></a></li>
<li><a href="sql.html#formatting">Formatting<span></span></a></li>
<li><a href="sql.html#table-commands">Table commands<span></span></a></li>
<li><a href="sql.html#data-manipulation">Data manipulation<span></span></a></li>
<li><a href="sql.html#insert">INSERT<span></span></a></li>
<li><a href="sql.html#update-1">UPDATE<span></span></a></li>
<li><a href="sql.html#delete-1">DELETE<span></span></a></li>
<li><a href="sql.html#sql-routines">SQL routines<span></span></a></li>
<li><a href="sql.html#universal-unique-identifier-uuid">Universal Unique Identifier (UUID)<span></span></a></li>
<li><a href="sql.html#nullsmuch-ado-about-missing-information">Nulls—much ado about missing information<span></span></a></li>
<li><a href="sql.html#security">Security<span></span></a></li>
<li><a href="sql.html#the-system-catalog">The system catalog<span></span></a></li>
<li><a href="sql.html#natural-language-processing">Natural language processing<span></span></a></li>
<li><a href="sql.html#connectivity-and-odbc">Connectivity and ODBC<span></span></a></li>
<li><a href="sql.html#embedded-sql">Embedded SQL<span></span></a></li>
<li><a href="sql.html#user-defined-types">User-defined types<span></span></a></li>
<li><a href="sql.html#the-future-of-sql">The future of SQL<span></span></a></li>
</ul></li>
<li><a href="reference-2-sql-playbook.html#reference-2-sql-playbook">Reference 2: SQL Playbook<span></span></a>
<ul>
<li><a href="reference-2-sql-playbook.html#the-power-of-sql">The power of SQL<span></span></a></li>
</ul></li>
<li><a href="section-3-advanced-data-management.html#section-3-advanced-data-management">Section 3 Advanced Data Management<span></span></a></li>
<li class="chapter" data-level="11" data-path="spatial-and-temporal-data-management.html"><a href="spatial-and-temporal-data-management.html"><i class="fa fa-check"></i><b>11</b> Spatial and Temporal Data Management<span></span></a>
<ul>
<li><a href="spatial-and-temporal-data-management.html#spatial-data">Spatial data<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#managing-spatial-data">Managing spatial data<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#data-model-mapping">Data model mapping<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#r-tree">R-tree<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#managing-temporal-data">Managing temporal data<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#key-terms-and-concepts-8">Key terms and concepts<span></span></a></li>
<li><a href="spatial-and-temporal-data-management.html#exercises-11">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graph-databases.html"><a href="graph-databases.html"><i class="fa fa-check"></i><b>12</b> Graph Databases<span></span></a>
<ul>
<li><a href="graph-databases.html#a-graph-database">A graph database<span></span></a></li>
<li><a href="graph-databases.html#neo4j-a-graph-database-implementation">Neo4j – a graph database implementation<span></span></a></li>
<li><a href="graph-databases.html#a-relationship-between-nodes">A relationship between nodes<span></span></a></li>
<li><a href="graph-databases.html#key-terms-and-concepts-9">Key terms and concepts<span></span></a></li>
<li><a href="graph-databases.html#exercises-12">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="xml-managing-data-exchange.html"><a href="xml-managing-data-exchange.html"><i class="fa fa-check"></i><b>13</b> XML: Managing Data Exchange<span></span></a>
<ul>
<li><a href="xml-managing-data-exchange.html#four-problems">Four problems<span></span></a></li>
<li><a href="xml-managing-data-exchange.html#sgml">SGML<span></span></a></li>
<li><a href="xml-managing-data-exchange.html#xml">XML<span></span></a></li>
<li><a href="xml-managing-data-exchange.html#xml-schema">XML schema<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="organizational-intelligence.html"><a href="organizational-intelligence.html"><i class="fa fa-check"></i><b>14</b> Organizational Intelligence<span></span></a>
<ul>
<li><a href="organizational-intelligence.html#information-poverty">Information poverty<span></span></a></li>
<li><a href="organizational-intelligence.html#an-organizational-intelligence-system">An organizational intelligence system<span></span></a></li>
<li><a href="organizational-intelligence.html#the-data-warehouse">The data warehouse<span></span></a></li>
<li><a href="organizational-intelligence.html#exploiting-data-stores">Exploiting data stores<span></span></a></li>
<li><a href="organizational-intelligence.html#data-mining">Data mining<span></span></a></li>
<li><a href="organizational-intelligence.html#exercises-14">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>15</b> Introduction to R<span></span></a>
<ul>
<li><a href="introduction-to-r.html#the-r-project">The R project<span></span></a></li>
<li><a href="introduction-to-r.html#datasets">Datasets<span></span></a></li>
<li><a href="introduction-to-r.html#packages">Packages<span></span></a></li>
<li><a href="introduction-to-r.html#file-handing">File handing<span></span></a></li>
<li><a href="introduction-to-r.html#data-manipulation-with-dplyr">Data manipulation with dplyr<span></span></a></li>
<li><a href="introduction-to-r.html#database-access">Database access<span></span></a></li>
<li><a href="introduction-to-r.html#excel-files">Excel files<span></span></a></li>
<li><a href="introduction-to-r.html#r-resources">R resources<span></span></a></li>
<li><a href="introduction-to-r.html#r-and-data-analytics">R and data analytics<span></span></a></li>
<li><a href="introduction-to-r.html#exercises-15">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="data-visualization-1.html"><a href="data-visualization-1.html"><i class="fa fa-check"></i><b>16</b> Data visualization<span></span></a>
<ul>
<li><a href="data-visualization-1.html#visual-processing">Visual processing<span></span></a></li>
<li><a href="data-visualization-1.html#the-grammar-of-graphics">The grammar of graphics<span></span></a></li>
<li><a href="data-visualization-1.html#ggplot2">ggplot2<span></span></a></li>
<li><a href="data-visualization-1.html#some-recipes">Some recipes<span></span></a></li>
<li><a href="data-visualization-1.html#geographic-data">Geographic data<span></span></a></li>
<li><a href="data-visualization-1.html#r-resources-1">R resources<span></span></a></li>
<li><a href="data-visualization-1.html#exercises-16">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="text-mining-natural-language-processing.html"><a href="text-mining-natural-language-processing.html"><i class="fa fa-check"></i><b>17</b> Text mining &amp; natural language processing<span></span></a>
<ul>
<li><a href="text-mining-natural-language-processing.html#the-nature-of-language">The nature of language<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#levels-of-processing">Levels of processing<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#tokenization">Tokenization<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#sentiment-analysis">Sentiment analysis<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#corpus">Corpus<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#readability">Readability<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#preprocessing">Preprocessing<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#word-frequency-analysis">Word frequency analysis<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#co-occurrence-and-association">Co-occurrence and association<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#cluster-analysis">Cluster analysis<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#topic-modeling">Topic modeling<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#named-entity-recognition-ner">Named-entity recognition (NER)<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#future-developments">Future developments<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#key-terms-and-concepts-13">Key terms and concepts<span></span></a></li>
<li><a href="text-mining-natural-language-processing.html#exercises-17">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="cluster-computing.html"><a href="cluster-computing.html"><i class="fa fa-check"></i><b>18</b> Cluster computing<span></span></a>
<ul>
<li><a href="cluster-computing.html#a-paradigm-shift">A paradigm shift<span></span></a></li>
<li><a href="cluster-computing.html#the-drivers">The drivers<span></span></a></li>
<li><a href="cluster-computing.html#the-bottleneck-and-its-solution">The bottleneck and its solution<span></span></a></li>
<li><a href="cluster-computing.html#lambda-architecture">Lambda Architecture<span></span></a></li>
<li><a href="cluster-computing.html#hadoop">Hadoop<span></span></a></li>
<li><a href="cluster-computing.html#spark">Spark<span></span></a></li>
<li><a href="cluster-computing.html#exercises-18">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i><b>19</b> Dashboards<span></span></a>
<ul>
<li><a href="dashboards.html#the-value-of-dashboards">The value of dashboards<span></span></a></li>
<li><a href="dashboards.html#designing-a-dashboard">Designing a dashboard<span></span></a></li>
<li><a href="dashboards.html#dashboards-with-r">Dashboards with R<span></span></a></li>
<li><a href="dashboards.html#conclusion-5">Conclusion<span></span></a></li>
<li><a href="dashboards.html#exercises-19">Exercises<span></span></a></li>
</ul></li>
<li><a href="section-4-managing-organizational-memory.html#section-4-managing-organizational-memory">Section 4 Managing Organizational Memory<span></span></a></li>
<li class="chapter" data-level="20" data-path="data-structure-and-storage.html"><a href="data-structure-and-storage.html"><i class="fa fa-check"></i><b>20</b> Data Structure and Storage<span></span></a>
<ul>
<li><a href="data-structure-and-storage.html#the-data-deluge">The data deluge<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-structures-1">Data structures<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-coding-standards">Data coding standards<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-storage-devices">Data storage devices<span></span></a></li>
<li><a href="data-structure-and-storage.html#data-compression">Data compression<span></span></a></li>
<li><a href="data-structure-and-storage.html#key-terms-and-concepts-15">Key terms and concepts<span></span></a></li>
<li><a href="data-structure-and-storage.html#exercises-20">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="data-processing-architectures.html"><a href="data-processing-architectures.html"><i class="fa fa-check"></i><b>21</b> Data Processing Architectures<span></span></a>
<ul>
<li><a href="data-processing-architectures.html#architectural-choices">Architectural choices<span></span></a></li>
<li><a href="data-processing-architectures.html#remote-job-entry">Remote job entry<span></span></a></li>
<li><a href="data-processing-architectures.html#personal-database">Personal database<span></span></a></li>
<li><a href="data-processing-architectures.html#clientserver">Client/server<span></span></a></li>
<li><a href="data-processing-architectures.html#cloud-computing">Cloud computing<span></span></a></li>
<li><a href="data-processing-architectures.html#distributed-database">Distributed database<span></span></a></li>
<li><a href="data-processing-architectures.html#distributed-data-access">Distributed data access<span></span></a></li>
<li><a href="data-processing-architectures.html#distributed-database-design">Distributed database design<span></span></a></li>
<li><a href="data-processing-architectures.html#key-terms-and-concepts-16">Key terms and concepts<span></span></a></li>
<li><a href="data-processing-architectures.html#exercises-21">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="sql-and-java.html"><a href="sql-and-java.html"><i class="fa fa-check"></i><b>22</b> SQL and Java<span></span></a>
<ul>
<li><a href="sql-and-java.html#java">JAVA<span></span></a></li>
<li><a href="sql-and-java.html#using-sql-within-java">Using SQL within Java<span></span></a></li>
<li><a href="sql-and-java.html#javaserver-pages-jsp">JavaServer Pages (JSP)<span></span></a></li>
<li><a href="sql-and-java.html#exercises-22">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="data-integrity.html"><a href="data-integrity.html"><i class="fa fa-check"></i><b>23</b> Data Integrity<span></span></a>
<ul>
<li><a href="data-integrity.html#introduction-2">Introduction<span></span></a></li>
<li><a href="data-integrity.html#transaction-management">Transaction management<span></span></a></li>
<li><a href="data-integrity.html#protecting-existence">Protecting existence<span></span></a></li>
<li><a href="data-integrity.html#maintaining-data-quality">Maintaining data quality<span></span></a></li>
<li><a href="data-integrity.html#ensuring-confidentiality">Ensuring confidentiality<span></span></a></li>
<li><a href="data-integrity.html#key-terms-and-concepts-18">Key terms and concepts<span></span></a></li>
<li><a href="data-integrity.html#exercises-23">Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="data-administration.html"><a href="data-administration.html"><i class="fa fa-check"></i><b>24</b> Data Administration<span></span></a>
<ul>
<li><a href="data-administration.html#introduction-3">Introduction<span></span></a></li>
<li><a href="data-administration.html#the-chief-data-officer">The Chief Data Officer<span></span></a></li>
<li><a href="data-administration.html#management-of-the-database-environment">Management of the database environment<span></span></a></li>
<li><a href="data-administration.html#data-administration-1">Data administration<span></span></a></li>
<li><a href="data-administration.html#database-management-systems-dbmss">Database management systems (DBMSs)<span></span></a></li>
<li><a href="data-administration.html#groupware-1">Groupware<span></span></a></li>
<li><a href="data-administration.html#data-integration">Data integration<span></span></a></li>
<li><a href="data-administration.html#conclusion-9">Conclusion<span></span></a></li>
<li><a href="data-administration.html#exercises-24">Exercises<span></span></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-r" class="section level1 hasAnchor" number="15">
<h1><span class="header-section-number">Chapter 15</span> Introduction to R<a href="introduction-to-r.html#introduction-to-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p><em>Statistics are no substitute for judgment</em></p>
<p>Henry Clay, U.S. congressman and senator</p>
</blockquote>
<div id="learning-objectives-14" class="section level3 unnumbered hasAnchor">
<h3>Learning objectives<a href="introduction-to-r.html#learning-objectives-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Students completing this chapter will:</p>
<ul>
<li><p>Be able to use R for file handling and basic statistics;</p></li>
<li><p>Be competent in the use of RStudio.</p></li>
</ul>
</div>
<div id="the-r-project" class="section level2 unnumbered hasAnchor">
<h2>The R project<a href="introduction-to-r.html#the-r-project" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <a href="http://www.r-project.org">R project</a> supports ongoing
development of R, a free software environment for statistical computing,
data visualization, and data analytics. It is a highly-extensible
platform, the R programming language is object-oriented, and R runs on
the common operating systems. The adoption of R has grown in recent years, and is now the one of the most popular analytics platform.</p>
<p><a href="http://www.rstudio.com">RStudio</a> is a commonly used <strong>integrated
development environment</strong> (IDE) for R. It contains four windows. The
upper-left window contains scripts, one or more lines of R code that
constitute a task. Scripts can be saved and reused. It is good practice
to save scripts as you will find you can often edit an existing script
to meet the needs of a new task. The upper-right window provides details
of all datasets created. It also useful for importing datasets and
reviewing the history of R commands executed. The lower-left window
displays the results of executed scripts. If you want to clear this
window, then press control-L. The lower-right window can be used to show
files on your system, plots you have created by executing a script,
packages installed and loaded, and help information.</p>
<div id="creating-a-project" class="section level3 unnumbered hasAnchor">
<h3>Creating a project<a href="introduction-to-r.html#creating-a-project" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It usually makes sense to store all R scripts and data for a project in the same
folder or directory. Thus, when you first start RStudio, create a new
project.</p>
<p>Project &gt; Create Project…</p>
<p>RStudio remembers the state of each window, so when you quit and reopen,
it will restore the windows to their prior state. You can also open an
existing project, which sets the path to the folder for that project. As
a result, all saved scripts and files during a session are stored in
that folder.</p>
<p><em>RStudio interface</em></p>
<p><img src="Figures/Section%202/RStudio.png" width="500" /></p>
</div>
<div id="scripting" class="section level3 unnumbered hasAnchor">
<h3>Scripting<a href="introduction-to-r.html#scripting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A script is a set of R commands. You can also think of it as a short
program.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="introduction-to-r.html#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CO2 parts per million (ppm) for 2000-2009</span></span>
<span id="cb274-2"><a href="introduction-to-r.html#cb274-2" aria-hidden="true" tabindex="-1"></a>co2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">369.40</span>,<span class="fl">371.07</span>,<span class="fl">373.17</span>,<span class="fl">375.78</span>,<span class="fl">377.52</span>,<span class="fl">379.76</span>,<span class="fl">381.85</span>,<span class="fl">383.71</span>,<span class="fl">385.57</span>,<span class="fl">384.78</span>)</span>
<span id="cb274-3"><a href="introduction-to-r.html#cb274-3" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span>  (<span class="dv">2000</span><span class="sc">:</span><span class="dv">2009</span>) <span class="co"># a range of values</span></span>
<span id="cb274-4"><a href="introduction-to-r.html#cb274-4" aria-hidden="true" tabindex="-1"></a><span class="co"># show values</span></span>
<span id="cb274-5"><a href="introduction-to-r.html#cb274-5" aria-hidden="true" tabindex="-1"></a>co2</span>
<span id="cb274-6"><a href="introduction-to-r.html#cb274-6" aria-hidden="true" tabindex="-1"></a>year</span>
<span id="cb274-7"><a href="introduction-to-r.html#cb274-7" aria-hidden="true" tabindex="-1"></a><span class="co"># compute mean and standard deviation</span></span>
<span id="cb274-8"><a href="introduction-to-r.html#cb274-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(co2)</span>
<span id="cb274-9"><a href="introduction-to-r.html#cb274-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(co2)</span>
<span id="cb274-10"><a href="introduction-to-r.html#cb274-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(year,co2)</span></code></pre></div>
<p>The previous script</p>
<ul>
<li><p>Creates an object co2 with the values 369.40, 371.07, … , 348.78.</p></li>
<li><p>Creates an object year with values 2000 through 2009.</p></li>
<li><p>Displays in the lower-left window the values stored in these two
objects.</p></li>
<li><p>Computes the mean for each variable.</p></li>
<li><p>Creates an x-y plot of year and co2, which is shown in the
lower-right window.</p></li>
</ul>
<blockquote>
<p>Note the use of &lt;- for assigning values to an object.
RStudio provides a keyboard command, Alt + - (Windows &amp; Linux)
or Option + - (Mac).
In R, c is short for combine values.</p>
</blockquote>
<blockquote>
<p>❓ <em>Skill builder</em></p>
<p>Plot kWh per square foot by year for the following University of
Georgia data.</p>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="right">square feet</th>
<th align="right">kWh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2007</td>
<td align="right">14,214,216</td>
<td align="right">2,141,705</td>
</tr>
<tr class="even">
<td align="right">2008</td>
<td align="right">14,359,041</td>
<td align="right">2,108,088</td>
</tr>
<tr class="odd">
<td align="right">2009</td>
<td align="right">14,752,886</td>
<td align="right">2,150,841</td>
</tr>
<tr class="even">
<td align="right">2010</td>
<td align="right">15,341,886</td>
<td align="right">2,211,414</td>
</tr>
<tr class="odd">
<td align="right">2011</td>
<td align="right">15,573,100</td>
<td align="right">2,187,164</td>
</tr>
<tr class="even">
<td align="right">2012</td>
<td align="right">15,740,742</td>
<td align="right">2,057,364</td>
</tr>
</tbody>
</table>
<p><em>Data in R format</em></p>
<p>year &lt;- (2007:2012)</p>
<p>sqft &lt;- c(14214216, 14359041, 14752886, 15341886, 15573100, 15740742)</p>
<p>kwh &lt;- c(2141705, 2108088, 2150841, 2211414, 2187164, 2057364)</p>
</blockquote>
</div>
</div>
<div id="datasets" class="section level2 unnumbered hasAnchor">
<h2>Datasets<a href="introduction-to-r.html#datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>An R dataset is the familiar table of the relational model. There is one
row for each observation, and the columns contain the observed values or
facts about each observation. R supports multiple data structures and
data types.</p>
<div id="vector" class="section level3 unnumbered hasAnchor">
<h3>Vector<a href="introduction-to-r.html#vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A vector is a single row table where data are all of the same type
(e.g., character, logical, numeric). In the following sample code, two
numeric vectors are created.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="introduction-to-r.html#cb275-1" aria-hidden="true" tabindex="-1"></a>co2 <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="fl">369.40</span>,<span class="fl">371.07</span>,<span class="fl">373.17</span>,<span class="fl">375.78</span>,<span class="fl">377.52</span>,<span class="fl">379.76</span>,<span class="fl">381.85</span>,<span class="fl">383.71</span>,<span class="fl">385.57</span>,<span class="fl">384.78</span>)</span>
<span id="cb275-2"><a href="introduction-to-r.html#cb275-2" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span>  (<span class="dv">2000</span><span class="sc">:</span><span class="dv">2009</span>)</span>
<span id="cb275-3"><a href="introduction-to-r.html#cb275-3" aria-hidden="true" tabindex="-1"></a>co2[<span class="dv">2</span>] <span class="co"># show the second value</span></span></code></pre></div>
</div>
<div id="matrix" class="section level3 unnumbered hasAnchor">
<h3>Matrix<a href="introduction-to-r.html#matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A matrix is a table where all data are of the same type. Because it is a
table, a matrix has two dimensions, which need to be specified when
defining the matrix. The sample code creates a matrix with 4 rows and 3
columns, as the results of the executed code illustrate.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="introduction-to-r.html#cb276-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow=</span><span class="dv">4</span>,<span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb276-2"><a href="introduction-to-r.html#cb276-2" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">4</span>,<span class="dv">3</span>] <span class="co"># show the value in row 4, column 3</span></span></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">[,1]</th>
<th align="right">[,2]</th>
<th align="right">[,3]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>[1,]</strong></td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td><strong>[2,]</strong></td>
<td align="right">2</td>
<td align="right">6</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td><strong>[3,]</strong></td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td><strong>[4,]</strong></td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">12</td>
</tr>
</tbody>
</table>
<blockquote>
<p>❓ <em>Skill builder</em></p>
<p>Create a matrix with 6 rows and 3 columns
containing the numbers 1 through 18.</p>
</blockquote>
</div>
<div id="array" class="section level3 unnumbered hasAnchor">
<h3>Array<a href="introduction-to-r.html#array" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An array is a multidimensional table. It extends a matrix beyond two
dimensions. Review the results of running the following code by
displaying the array created.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="introduction-to-r.html#cb277-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span>  <span class="fu">array</span>(letters[<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>)], <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb277-2"><a href="introduction-to-r.html#cb277-2" aria-hidden="true" tabindex="-1"></a>a[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>] <span class="co"># show the first value in the array</span></span></code></pre></div>
</div>
<div id="data-frame" class="section level3 unnumbered hasAnchor">
<h3>Data frame<a href="introduction-to-r.html#data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While vectors, matrices, and arrays are all forms of a table, they are
restricted to data of the same type (e.g., numeric). A data frame, like
a relational table, can have columns of different data types. The sample
code creates a data frame with character and numeric data types.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="introduction-to-r.html#cb278-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>,<span class="st">&quot;f&quot;</span>,<span class="st">&quot;f&quot;</span>)</span>
<span id="cb278-2"><a href="introduction-to-r.html#cb278-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">3</span>)</span>
<span id="cb278-3"><a href="introduction-to-r.html#cb278-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(gender,age)</span>
<span id="cb278-4"><a href="introduction-to-r.html#cb278-4" aria-hidden="true" tabindex="-1"></a><span class="co"># show some data frame values</span></span>
<span id="cb278-5"><a href="introduction-to-r.html#cb278-5" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span>,<span class="dv">2</span>] <span class="co"># a cell</span></span>
<span id="cb278-6"><a href="introduction-to-r.html#cb278-6" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span>,] <span class="co"># a row</span></span>
<span id="cb278-7"><a href="introduction-to-r.html#cb278-7" aria-hidden="true" tabindex="-1"></a>df[,<span class="dv">2</span>] <span class="co"># a column</span></span></code></pre></div>
</div>
<div id="list" class="section level3 unnumbered hasAnchor">
<h3>List<a href="introduction-to-r.html#list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The most general form of data storage is a list, which is an ordered
collection of objects. It permits you to store a variety of objects
together under a single name. In other words, a list is an object that
contains other objects. Retrieve a list member with a <em>single square
bracket</em> []. To reference a list member directly, use a <em>double square
bracket</em> [[]].</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="introduction-to-r.html#cb279-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span>  <span class="fu">list</span>(co2,m,df)</span>
<span id="cb279-2"><a href="introduction-to-r.html#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="co"># show a list member</span></span>
<span id="cb279-3"><a href="introduction-to-r.html#cb279-3" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">3</span>] <span class="co"># retrieves list member</span></span>
<span id="cb279-4"><a href="introduction-to-r.html#cb279-4" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">3</span>]] <span class="co"># reference a list member</span></span>
<span id="cb279-5"><a href="introduction-to-r.html#cb279-5" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">1</span>]][<span class="dv">2</span>] <span class="co"># second element of list 1</span></span></code></pre></div>
</div>
<div id="logical-operators" class="section level3 unnumbered hasAnchor">
<h3>Logical operators<a href="introduction-to-r.html#logical-operators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R supports the common logical operators, as shown in the following
table.</p>
<table>
<thead>
<tr class="header">
<th align="left">Logical operator</th>
<th align="left">Symbol</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">EQUAL</td>
<td align="left">==</td>
</tr>
<tr class="even">
<td align="left">AND</td>
<td align="left">&amp;</td>
</tr>
<tr class="odd">
<td align="left">OR</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">NOT</td>
<td align="left">!</td>
</tr>
</tbody>
</table>
</div>
<div id="object" class="section level3 unnumbered hasAnchor">
<h3>Object<a href="introduction-to-r.html#object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, an object is anything that can be assigned to a variable. It can
be a constant, a function, a data structure, a graph, a times series,
and so on. You find that the various packages in R support the creation
of a wide range of objects and provide functions to work with these and
other objects. A variable is a way of referring to an object. Thus, we
might use the variable named <em>l</em> to refer to the list object defined in
the preceding subsection.</p>
</div>
<div id="types-of-data" class="section level3 unnumbered hasAnchor">
<h3>Types of data<a href="introduction-to-r.html#types-of-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R can handle the four types of data: nominal, ordinal, interval, and
ratio.</p>
<p><em>Nominal</em> data, typically character strings, are used for
classification (e.g., high, medium, or low).</p>
<p><em>Ordinal</em> data represent an
ordering and thus can be sorted (e.g., the seeding or ranking of players
for a tennis tournament). The intervals between ordinal data are not
necessarily equal. Thus, the top seeded tennis play (ranked 1) might be
far superior to the second seeded (ranked 2), who might be only
marginally better than the third seed (ranked 3).</p>
<p><em>Interval</em> and <em>ratio</em> are
forms of measurement data. The interval between the units of measure for
interval data are equal. In other words, the distance between 50cm and
51cm is the same as the distance between 105cm and 106cm. Ratio data
have equal intervals and a natural zero point. Time, distance, and mass
are examples of ratio scales. Celsius and Fahrenheit are interval data
types, but not ratio, because the zero point is arbitrary. As a result,
10ºC is not twice as hot as 5ºC. Whereas, Kelvin is a ratio data type
because nothing can be colder than 0º K, a natural zero point.</p>
<p>In R, nominal and ordinal data types are also known as <em>factors</em>.
Defining a column as a factor determines how its data are analyzed and
presented. By default, factor levels for character vectors are created
in alphabetical order, which is often not what is desired. To be
precise, specify using the levels option.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="introduction-to-r.html#cb280-1" aria-hidden="true" tabindex="-1"></a>rating <span class="ot">&lt;-</span>   <span class="fu">c</span>(<span class="st">&#39;high&#39;</span>,<span class="st">&#39;medium&#39;</span>,<span class="st">&#39;low&#39;</span>)</span>
<span id="cb280-2"><a href="introduction-to-r.html#cb280-2" aria-hidden="true" tabindex="-1"></a>rating <span class="ot">&lt;-</span>  <span class="fu">factor</span>(rating, <span class="at">order=</span>T, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&#39;high&#39;</span>,<span class="st">&#39;medium&#39;</span>,<span class="st">&#39;low&#39;</span>))</span></code></pre></div>
<p>Thus, the preceding code will result in changing the default reporting
of factors from alphabetical order (i.e., high, low, and medium) to
listing them in the specified order (i.e., high, medium, and low).</p>
</div>
<div id="missing-values" class="section level3 unnumbered hasAnchor">
<h3>Missing values<a href="introduction-to-r.html#missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Missing values in R are represented as NA, meaning not available.
Infeasible values, such as the result of dividing by zero, are indicated
by NaN, meaning not a number. Any arithmetic expression or function
operating on data containing missing values will return NA. Thus
<code>sum(c(1,NA,2))</code> will return NA.</p>
<p>To exclude missing values from calculations, use the option <code>na.rm = T</code>,
which specifies the removal of missing values prior to calculations.
Thus, <code>sum(c(1,NA,2),na.rm=T)</code> will return 3.</p>
<p>You can remove rows with missing data by using <code>na.omit()</code>, which will
delete those rows containing missing values.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="introduction-to-r.html#cb281-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>,<span class="st">&quot;f&quot;</span>,<span class="st">&quot;f&quot;</span>,<span class="st">&quot;f&quot;</span>)</span>
<span id="cb281-2"><a href="introduction-to-r.html#cb281-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">3</span>,<span class="cn">NA</span>)</span>
<span id="cb281-3"><a href="introduction-to-r.html#cb281-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(gender,age)</span>
<span id="cb281-4"><a href="introduction-to-r.html#cb281-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span>  <span class="fu">na.omit</span>(df)</span></code></pre></div>
</div>
</div>
<div id="packages" class="section level2 unnumbered hasAnchor">
<h2>Packages<a href="introduction-to-r.html#packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A major advantage of R is that the basic software can be easily extended
by installing additional packages, of which close to 20,000 exist. You
can consult the <a href="https://cran.r-project.org/web/packages/">R package directory</a> to help find a package that has the
functions you need. RStudio has an interface for finding and
installing packages. See the Packages tab on RStudio’s lower-right
window.</p>
<p>Before running a script, you need to indicate which packages it needs,
beyond the default packages that are automatically loaded. The library
statement specifies that a package is required for execution. The
following example uses the measurements package to handle the conversion
of Fahrenheit to Celsius. The package’s documentation provides details
of how to use its various conversion options.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="introduction-to-r.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(measurements) <span class="co"># previously installed</span></span>
<span id="cb282-2"><a href="introduction-to-r.html#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="co"># convert F to C</span></span>
<span id="cb282-3"><a href="introduction-to-r.html#cb282-3" aria-hidden="true" tabindex="-1"></a><span class="fu">conv_unit</span>(<span class="dv">100</span>,<span class="st">&#39;F&#39;</span>,<span class="st">&#39;C&#39;</span>)</span></code></pre></div>
<blockquote>
<p>❓ <strong>Skill builder</strong></p>
<p>Install the measurements package and run the
preceding code.</p>
</blockquote>
</div>
<div id="file-handing" class="section level2 unnumbered hasAnchor">
<h2>File handing<a href="introduction-to-r.html#file-handing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Files are the usual form of input for R scripts. Fortunately, R can
handle a wide variety of input formats, including text (e.g., CSV),
statistical package (e.g., SAS), and XML. A common approach is to use a
spreadsheet to prepare a data file, export it as CSV, and then read it
into R.</p>
<div id="reading-a-file" class="section level3 unnumbered hasAnchor">
<h3>Reading a file<a href="introduction-to-r.html#reading-a-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Files can be read from the local computer on which R is installed or the
Internet, as the following sample code illustrates. We will use the
readr library for handling files, so you will need to install it before
running the following code.</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="introduction-to-r.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb283-2"><a href="introduction-to-r.html#cb283-2" aria-hidden="true" tabindex="-1"></a><span class="co"># read a local file (this will not work on your computer)</span></span>
<span id="cb283-3"><a href="introduction-to-r.html#cb283-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;Documents/R/Data/centralparktemps.txt&quot;</span>, <span class="at">delim=</span><span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<p>You can also read a remote file using a URL.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="introduction-to-r.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb284-2"><a href="introduction-to-r.html#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="co"># read using a URL</span></span>
<span id="cb284-3"><a href="introduction-to-r.html#cb284-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb284-4"><a href="introduction-to-r.html#cb284-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim =</span> <span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<p>You must define the separator for data fields with the delim keyword
(e.g., for a tab use <code>delim = 't')</code>.</p>
</div>
<div id="learning-about-a-file" class="section level3 unnumbered hasAnchor">
<h3>Learning about a file<a href="introduction-to-r.html#learning-about-a-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>After reading a file, you might want to learn about its contents. First,
you can click on the file’s name in the top-right window. This will open
the file in the top-left window. If it is a long file, only a portion,
such as the first 1000 rows, will be displayed. Second, you can execute
some R commands, as shown in the following code, to show the first few
and last few rows. You can also report the dimensions of the file, its
structure, and the type of object.</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="introduction-to-r.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb285-2"><a href="introduction-to-r.html#cb285-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb285-3"><a href="introduction-to-r.html#cb285-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb285-4"><a href="introduction-to-r.html#cb285-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t) <span class="co">#  first few rows</span></span>
<span id="cb285-5"><a href="introduction-to-r.html#cb285-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(t) <span class="co">#  last few rows</span></span>
<span id="cb285-6"><a href="introduction-to-r.html#cb285-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(t) <span class="co"># dimension</span></span>
<span id="cb285-7"><a href="introduction-to-r.html#cb285-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(t) <span class="co"># structure of a dataset</span></span>
<span id="cb285-8"><a href="introduction-to-r.html#cb285-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(t) <span class="co">#type of object</span></span></code></pre></div>
</div>
<div id="referencing-columns" class="section level3 unnumbered hasAnchor">
<h3>Referencing columns<a href="introduction-to-r.html#referencing-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Columns within a table are referenced by using the format
tablename$columname. This is similar to the qualification method used
in SQL. The following code shows a few examples. It also illustrates how
to add a new column to an existing table.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="introduction-to-r.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(measurements)</span>
<span id="cb286-2"><a href="introduction-to-r.html#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb286-3"><a href="introduction-to-r.html#cb286-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb286-4"><a href="introduction-to-r.html#cb286-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb286-5"><a href="introduction-to-r.html#cb286-5" aria-hidden="true" tabindex="-1"></a><span class="co"># qualify with table name to reference a column</span></span>
<span id="cb286-6"><a href="introduction-to-r.html#cb286-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(t<span class="sc">$</span>temperature)</span>
<span id="cb286-7"><a href="introduction-to-r.html#cb286-7" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(t<span class="sc">$</span>year)</span>
<span id="cb286-8"><a href="introduction-to-r.html#cb286-8" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(t<span class="sc">$</span>month)</span>
<span id="cb286-9"><a href="introduction-to-r.html#cb286-9" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new column with the temperature in Celsius</span></span>
<span id="cb286-10"><a href="introduction-to-r.html#cb286-10" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>Ctemp <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">conv_unit</span>(t<span class="sc">$</span>temperature,<span class="st">&#39;F&#39;</span>,<span class="st">&#39;C&#39;</span>),<span class="dv">1</span>) <span class="co"># round to one decimal</span></span></code></pre></div>
</div>
<div id="recoding" class="section level3 unnumbered hasAnchor">
<h3>Recoding<a href="introduction-to-r.html#recoding" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some analyses might be facilitated by the recoding of data. For
instance, you might want to split a continuous measure into two
categories. Imagine you decide to classify all temperatures greater than
or equal to 25ºC as ‘hot’ and the rest as ‘other.’ Here are the R
command to create a new column in table t called Category.</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="introduction-to-r.html#cb287-1" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>Category <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(t<span class="sc">$</span>Ctemp <span class="sc">&gt;=</span> <span class="dv">30</span>, <span class="st">&#39;Hot&#39;</span>,<span class="st">&#39;Other&#39;</span>)</span></code></pre></div>
</div>
<div id="deleting-a-column" class="section level3 unnumbered hasAnchor">
<h3>Deleting a column<a href="introduction-to-r.html#deleting-a-column" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can delete a column by setting each of its values to NULL.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="introduction-to-r.html#cb288-1" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>Category <span class="ot">&lt;-</span>  <span class="cn">NULL</span></span></code></pre></div>
</div>
<div id="reshaping-a-file" class="section level3 unnumbered hasAnchor">
<h3>Reshaping a file<a href="introduction-to-r.html#reshaping-a-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data are not always in the shape that you want. For example, you might
have a spreadsheet that, for each year, lists the quarterly observations
(i.e., year and four quarterly values in one row). For analysis, you
typically need to have a row for each distinct observation (e.g., year,
quarter, value). <em>Gathering</em> converts a document from what is commonly
called <em>wide</em> to <em>narrow</em> format. It is akin to normalization in that
the new table has year and quarter as the identifier of each
observation.</p>
<p>Once the file has been read, you create appropriate column names for the
converted file using the colnames() function applied to the file t.
Thus, the input file has column names of Q1, Q2, etc, but it makes sense
for these to be integers in the new file in a new column called quarter.</p>
<p>The gather command specifies the file to be gathered, the column names
of the new file, and the columns of the input file to be gathered (i.e.,
the four quarters in columns 2 through 5). Note that you also need
convert the column quarter from character to integer.</p>
<p><em>Reshaping a file with gathering and spreading</em></p>
<p><img src="Figures/Chapter%2015/gather-spread.png" /></p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="introduction-to-r.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb289-2"><a href="introduction-to-r.html#cb289-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/gatherExample.csv&#39;</span></span>
<span id="cb289-3"><a href="introduction-to-r.html#cb289-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url)</span>
<span id="cb289-4"><a href="introduction-to-r.html#cb289-4" aria-hidden="true" tabindex="-1"></a>t</span>
<span id="cb289-5"><a href="introduction-to-r.html#cb289-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(t) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;year&#39;</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb289-6"><a href="introduction-to-r.html#cb289-6" aria-hidden="true" tabindex="-1"></a>t</span>
<span id="cb289-7"><a href="introduction-to-r.html#cb289-7" aria-hidden="true" tabindex="-1"></a><span class="co"># gather with data in columns 2 through 5</span></span>
<span id="cb289-8"><a href="introduction-to-r.html#cb289-8" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">gather</span>(t,<span class="st">&#39;quarter&#39;</span>,<span class="st">&#39;value&#39;</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb289-9"><a href="introduction-to-r.html#cb289-9" aria-hidden="true" tabindex="-1"></a>g<span class="sc">$</span>quarter <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(g<span class="sc">$</span>quarter)</span>
<span id="cb289-10"><a href="introduction-to-r.html#cb289-10" aria-hidden="true" tabindex="-1"></a>g</span>
<span id="cb289-11"><a href="introduction-to-r.html#cb289-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-12"><a href="introduction-to-r.html#cb289-12" aria-hidden="true" tabindex="-1"></a><span class="co"># spread</span></span>
<span id="cb289-13"><a href="introduction-to-r.html#cb289-13" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">spread</span>(g,quarter,value)</span>
<span id="cb289-14"><a href="introduction-to-r.html#cb289-14" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb289-15"><a href="introduction-to-r.html#cb289-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(s) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;year&#39;</span>, <span class="st">&#39;Q1&#39;</span>,<span class="st">&#39;Q2&#39;</span>,<span class="st">&#39;Q3&#39;</span>,<span class="st">&#39;Q4&#39;</span>)</span>
<span id="cb289-16"><a href="introduction-to-r.html#cb289-16" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb289-17"><a href="introduction-to-r.html#cb289-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Spreading takes a narrow file and converts it to wide or spreadsheet format. This is the reverse of gathering.</span></span>
<span id="cb289-18"><a href="introduction-to-r.html#cb289-18" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">spread</span>(g,quarter,value)</span>
<span id="cb289-19"><a href="introduction-to-r.html#cb289-19" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb289-20"><a href="introduction-to-r.html#cb289-20" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(s) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;year&#39;</span>, <span class="st">&#39;Q1&#39;</span>,<span class="st">&#39;Q2&#39;</span>,<span class="st">&#39;Q3&#39;</span>,<span class="st">&#39;Q4&#39;</span>)</span>
<span id="cb289-21"><a href="introduction-to-r.html#cb289-21" aria-hidden="true" tabindex="-1"></a>s</span></code></pre></div>
</div>
<div id="writing-a-file" class="section level3 unnumbered hasAnchor">
<h3>Writing a file<a href="introduction-to-r.html#writing-a-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R can write data in a few file formats. We just focus on text format in
this brief introduction. The following code illustrates how to create a
new column containing the temperature in C and renaming an existing
column. The revised table is then written as a csv text file to the
project’s folder.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="introduction-to-r.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(measurements)</span>
<span id="cb290-2"><a href="introduction-to-r.html#cb290-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb290-3"><a href="introduction-to-r.html#cb290-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb290-4"><a href="introduction-to-r.html#cb290-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb290-5"><a href="introduction-to-r.html#cb290-5" aria-hidden="true" tabindex="-1"></a><span class="co"># compute Celsius and round to one decimal place</span></span>
<span id="cb290-6"><a href="introduction-to-r.html#cb290-6" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>Ctemp <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">conv_unit</span>(t<span class="sc">$</span>temperature,<span class="st">&#39;F&#39;</span>,<span class="st">&#39;C&#39;</span>),<span class="dv">1</span>)</span>
<span id="cb290-7"><a href="introduction-to-r.html#cb290-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(t)[<span class="dv">3</span>] <span class="ot">&lt;-</span>  <span class="st">&#39;Ftemp&#39;</span> <span class="co"># rename third column to indicate Fahrenheit</span></span>
<span id="cb290-8"><a href="introduction-to-r.html#cb290-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(t,<span class="st">&quot;centralparktempsCF.txt&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="data-manipulation-with-dplyr" class="section level2 unnumbered hasAnchor">
<h2>Data manipulation with dplyr<a href="introduction-to-r.html#data-manipulation-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <a href="http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.htm">dplyr</a> package provides functions for efficiently
manipulating data sets. By providing a series of basic data handling
functions and use of the pipe function ( %&gt;% ),<a href="data-administration.html#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a> dplyr
implements a grammar for data manipulation. The pipe function is used to
pass data from one operation to the next.</p>
<p><em>Some dplyr functions</em></p>
<table>
<colgroup>
<col width="29%" />
<col width="70%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">filter()</td>
<td align="left">Select rows</td>
</tr>
<tr class="even">
<td align="left">select()</td>
<td align="left">Select columns</td>
</tr>
<tr class="odd">
<td align="left">arrange()</td>
<td align="left">Sort rows</td>
</tr>
<tr class="even">
<td align="left">summarize()</td>
<td align="left">Compute a single summary statistic</td>
</tr>
<tr class="odd">
<td align="left">group_by()</td>
<td align="left">Pair with summarize() to analyze groups within a dataset</td>
</tr>
<tr class="even">
<td align="left">inner_join()</td>
<td align="left">Join two tables</td>
</tr>
<tr class="odd">
<td align="left">mutate()</td>
<td align="left">Create a new column</td>
</tr>
</tbody>
</table>
<p>Here are some examples using dplyr with data frame t.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="introduction-to-r.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb291-2"><a href="introduction-to-r.html#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb291-3"><a href="introduction-to-r.html#cb291-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb291-4"><a href="introduction-to-r.html#cb291-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb291-5"><a href="introduction-to-r.html#cb291-5" aria-hidden="true" tabindex="-1"></a><span class="co"># a row subset</span></span>
<span id="cb291-6"><a href="introduction-to-r.html#cb291-6" aria-hidden="true" tabindex="-1"></a>trow <span class="ot">&lt;-</span>  <span class="fu">filter</span>(t, year <span class="sc">==</span> <span class="dv">1999</span>)</span>
<span id="cb291-7"><a href="introduction-to-r.html#cb291-7" aria-hidden="true" tabindex="-1"></a><span class="co"># a column subset</span></span>
<span id="cb291-8"><a href="introduction-to-r.html#cb291-8" aria-hidden="true" tabindex="-1"></a>tcol <span class="ot">&lt;-</span>  <span class="fu">select</span>(t, year)</span></code></pre></div>
<p>The following example illustrates application of the pipe function. The
data frame t is piped to select(), and the results of select method
passed onto filter(). The final output is stored in trowcol, which
contains year, month, and Celsius temperature for the years 1990 through
1999.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="introduction-to-r.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a combo subset and use of the pipe function</span></span>
<span id="cb292-2"><a href="introduction-to-r.html#cb292-2" aria-hidden="true" tabindex="-1"></a>trowcol <span class="ot">&lt;-</span>  t <span class="sc">%&gt;%</span></span>
<span id="cb292-3"><a href="introduction-to-r.html#cb292-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, month, temperature) <span class="sc">%&gt;%</span></span>
<span id="cb292-4"><a href="introduction-to-r.html#cb292-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;</span> <span class="dv">1989</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2000</span>)</span></code></pre></div>
<div id="sorting" class="section level3 unnumbered hasAnchor">
<h3>Sorting<a href="introduction-to-r.html#sorting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also use dplyr for sorting.</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="introduction-to-r.html#cb293-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span>  <span class="fu">arrange</span>(t, <span class="fu">desc</span>(year),month)</span></code></pre></div>
<blockquote>
<p>❓ <strong>Skill builder</strong></p>
<ul>
<li><p>View the <a href="https://cdiac.ess-dive.lbl.gov/ftp/ndp030/global.1751_2011.ems">web page</a> of yearly CO<sub>2</sub> emissions (million metric
tons) since the beginning of the industrial revolution.</p></li>
<li><p>Create a new text file using R</p></li>
<li><p>Clean up the file for use with R and save it as CO2.txt</p></li>
<li><p>Import (Import Dataset) the file into R</p></li>
<li><p>Plot year versus CO<sub>2</sub> emissions</p></li>
</ul>
</blockquote>
</div>
<div id="summarizing-data" class="section level3 unnumbered hasAnchor">
<h3>Summarizing data<a href="introduction-to-r.html#summarizing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The dplyr function can be used for summarizing data in a specified way
(e.g., mean, minimum, standard deviation). In the sample code, a file
containing the mean temperature for each year is created. Notice the use
of the pipe function to first group the data by year and then compute
the mean for each group.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="introduction-to-r.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb294-2"><a href="introduction-to-r.html#cb294-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb294-3"><a href="introduction-to-r.html#cb294-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb294-4"><a href="introduction-to-r.html#cb294-4" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span>  t  <span class="sc">%&gt;%</span></span>
<span id="cb294-5"><a href="introduction-to-r.html#cb294-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb294-6"><a href="introduction-to-r.html#cb294-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">averageF =</span> <span class="fu">mean</span>(temperature))</span></code></pre></div>
</div>
<div id="adding-a-column" class="section level3 unnumbered hasAnchor">
<h3>Adding a column<a href="introduction-to-r.html#adding-a-column" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following example shows how to add a column and compute its average.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="introduction-to-r.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add column</span></span>
<span id="cb295-2"><a href="introduction-to-r.html#cb295-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span>  <span class="fu">mutate</span>(t, <span class="at">CTemp =</span> (temperature<span class="dv">-32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span>)</span>
<span id="cb295-3"><a href="introduction-to-r.html#cb295-3" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize</span></span>
<span id="cb295-4"><a href="introduction-to-r.html#cb295-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(t, <span class="fu">mean</span>(CTemp))</span></code></pre></div>
<blockquote>
<p>❓ <strong>Skill builder</strong></p>
<p>Create a file with the maximum temperature for each
year.</p>
</blockquote>
</div>
<div id="merging-files" class="section level3 unnumbered hasAnchor">
<h3>Merging files<a href="introduction-to-r.html#merging-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If there is a common column in two files, then they can be merged using
dplyr.::inner_join().<a href="data-administration.html#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a> This is the same as joining two tables
using a primary key and foreign key match. In the following code, a file
is created with the mean temperature for each year, and it is merged
with CO<sub>2</sub> readings for the same set of years.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="introduction-to-r.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb296-2"><a href="introduction-to-r.html#cb296-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb296-3"><a href="introduction-to-r.html#cb296-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb296-4"><a href="introduction-to-r.html#cb296-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb296-5"><a href="introduction-to-r.html#cb296-5" aria-hidden="true" tabindex="-1"></a><span class="co"># average monthly temp for each year</span></span>
<span id="cb296-6"><a href="introduction-to-r.html#cb296-6" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span>  t <span class="sc">%&gt;%</span></span>
<span id="cb296-7"><a href="introduction-to-r.html#cb296-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb296-8"><a href="introduction-to-r.html#cb296-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(temperature))</span>
<span id="cb296-9"><a href="introduction-to-r.html#cb296-9" aria-hidden="true" tabindex="-1"></a><span class="co"># read yearly carbon data (source: http://co2now.org/Current-CO2/CO2-Now/noaa-mauna-loa-co2-data.html)</span></span>
<span id="cb296-10"><a href="introduction-to-r.html#cb296-10" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/carbon1959-2011.txt&#39;</span></span>
<span id="cb296-11"><a href="introduction-to-r.html#cb296-11" aria-hidden="true" tabindex="-1"></a>carbon <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url,  <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb296-12"><a href="introduction-to-r.html#cb296-12" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span>  <span class="fu">inner_join</span>(a,carbon)</span>
<span id="cb296-13"><a href="introduction-to-r.html#cb296-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(m)</span></code></pre></div>
</div>
<div id="data-manipulation-with-sqldf" class="section level3 unnumbered hasAnchor">
<h3>Data manipulation with sqldf<a href="introduction-to-r.html#data-manipulation-with-sqldf" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The sqldf package enables use of the broad power of SQL to extract rows
or columns from a data frame to meet the needs of a particular analysis.
It provides essentially the same data manipulation capabilities as
dplyr. The following example illustrates use of sqldf.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="introduction-to-r.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sqldf)</span>
<span id="cb297-2"><a href="introduction-to-r.html#cb297-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb297-3"><a href="introduction-to-r.html#cb297-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">sqldf.driver =</span> <span class="st">&quot;SQLite&quot;</span>) <span class="co"># to avoid a conflict with RMySQL</span></span>
<span id="cb297-4"><a href="introduction-to-r.html#cb297-4" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/centralparktemps.txt&#39;</span></span>
<span id="cb297-5"><a href="introduction-to-r.html#cb297-5" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="at">delim=</span><span class="st">&#39;,&#39;</span>)</span>
<span id="cb297-6"><a href="introduction-to-r.html#cb297-6" aria-hidden="true" tabindex="-1"></a><span class="co"># a row subset</span></span>
<span id="cb297-7"><a href="introduction-to-r.html#cb297-7" aria-hidden="true" tabindex="-1"></a>trowcol <span class="ot">&lt;-</span>  <span class="fu">sqldf</span>(<span class="st">&quot;select year, month, temperature from t where year &gt; 1989 and year &lt; 2000&quot;</span>)</span></code></pre></div>
<p>However, sqldf does not enable you to embed R functions within an SQL
command. For this reason, dplyr is the recommended approach for data
manipulation. However, there might be occasions when you find it more
efficient to first execute a complex query in SQL and then do further
analysis with dplyr.</p>
</div>
<div id="correlation-coefficient" class="section level3 unnumbered hasAnchor">
<h3>Correlation coefficient<a href="introduction-to-r.html#correlation-coefficient" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A correlation coefficient is a measure of the covariation between two
sets of observations. In this case, we are interested in whether there
is a statistically significant covariation between temperature and the
level of atmospheric CO<sub>2</sub>.<a href="data-administration.html#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a></p>
<p>The following example shows how to create reproducible analytics, whereby the results of the analysis are used to provide text for the report.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="introduction-to-r.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(m<span class="sc">$</span>mean, m<span class="sc">$</span>CO2)</span></code></pre></div>
<p>The following results indicate that a correlation of .40 is a statistically significant as the p-value is less than 0.05, the common threshold for significance testing. Thus, we conclude that, because there is a small chance (p = .002997) of observing by chance such a value for the correlation coefficient, there is a relationship between mean temperature and the level of atmospheric CO2. Given that global warming theory predicts an increase in temperature with an increase in atmospheric CO2, we can also state that the observations support this theory. In other words, an increase in CO2 increases temperatures in Central Park.</p>
<pre><code>Pearson&#39;s product-moment correlation
data:  m$mean and m$CO2
t = 3.1173, df = 51, p-value = 0.002997
95 percent confidence interval:
0.1454994 0.6049393
sample estimates:
    cor
0.4000598</code></pre>
<p>When reporting correlation coefficients, you can you use the terms
small, moderate, and large in accordance with the values specified in
following table.</p>
<p><em>Effect size table</em></p>
<table>
<thead>
<tr class="header">
<th align="left">Correlation coefficient</th>
<th align="left">Effect size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">.10 - .30</td>
<td align="left">Small</td>
</tr>
<tr class="even">
<td align="left">.30 - .50</td>
<td align="left">Moderate</td>
</tr>
<tr class="odd">
<td align="left">&gt; .50</td>
<td align="left">Large</td>
</tr>
</tbody>
</table>
<p>If we want to understand the nature of the relationship, we could fit a
linear model.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="introduction-to-r.html#cb300-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(m<span class="sc">$</span>mean <span class="sc">~</span> m<span class="sc">$</span>CO2)</span>
<span id="cb300-2"><a href="introduction-to-r.html#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code></pre></div>
<p>The following results indicate a linear model is significant (p &lt; .05),
and it explains 14.36% (adjusted multiple R-squared) of the variation
between temperature and atmospheric CO<sub>2</sub>. The linear equation is</p>
<p><span class="math display">\[temperature = 48.29 + 0.019208* CO2\]</span></p>
<p>As CO<sub>2</sub> emissions are measured in parts per millions (ppm), an increase
of 1.0 ppm predicts an annual mean temperature increase in Central Park
of .01920 F°. Currently CO<sub>2</sub> emissions are increasing at about 2.0 ppm
per year.</p>
<p>As a linear model explains about 14% of the variation, this suggests
that there might other variables that should be considered (e.g., level
of volcanic activity) and that the relationship might not be linear.</p>
<pre><code>Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  48.291319    2.149937   22.462    &lt;2e-16 ***
 m$CO2        0.019208    0.006162    3.117    0.003 **
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
Residual standard error: 1.016 on 51 degrees of freedom
Multiple R-squared:   0.16, Adjusted R-squared:  0.1436
F-statistic: 9.718 on 1 and 51 DF,  p-value: 0.002997</code></pre>
</div>
</div>
<div id="database-access" class="section level2 unnumbered hasAnchor">
<h2>Database access<a href="introduction-to-r.html#database-access" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The DBI package provides a convenient way for a direct connection
between R and a relational database, such as MySQL or PostgreSQL. Once
the connection has been made, you can run an SQL query and load the
results into a R data frame.</p>
<p>The dbConnect() function makes the connection. You specify the type of
relational database, url, database name, userid, and password, as shown
in the following code.<a href="data-administration.html#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a></p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="introduction-to-r.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb302-2"><a href="introduction-to-r.html#cb302-2" aria-hidden="true" tabindex="-1"></a>conn <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(), <span class="st">&quot;www.richardtwatson.com&quot;</span>, <span class="at">dbname=</span><span class="st">&quot;Weather&quot;</span>, <span class="at">user=</span><span class="st">&quot;student&quot;</span>, <span class="at">password=</span><span class="st">&quot;student&quot;</span>)</span>
<span id="cb302-3"><a href="introduction-to-r.html#cb302-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Query the database and create file t for use with R</span></span>
<span id="cb302-4"><a href="introduction-to-r.html#cb302-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(conn,<span class="st">&quot;select * from record;&quot;</span>)</span>
<span id="cb302-5"><a href="introduction-to-r.html#cb302-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t)</span></code></pre></div>
<p>For security reasons, it is not a good idea to put database access
details in your R code. They should be hidden in a file. I recommend
that you create a csv file within your R code folder to containing
database access parameters. First, create a new directory or folder
(File &gt; New Project &gt; New Directory &gt; Empty Project), called dbaccess
for containing you database access files. Then, create a csvfile (Use
File &gt; New File &gt; Text File) with the name weather_richardtwatson.csv
in the newly created folder containing the following data:</p>
<pre><code>url,dbname,user,password:
richardtwatson.com,Weather,student,student</code></pre>
<p>The R code will now be:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="introduction-to-r.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Database access</span></span>
<span id="cb304-2"><a href="introduction-to-r.html#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb304-3"><a href="introduction-to-r.html#cb304-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb304-4"><a href="introduction-to-r.html#cb304-4" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;dbaccess/weather_richardtwatson.csv&#39;</span></span>
<span id="cb304-5"><a href="introduction-to-r.html#cb304-5" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span>  <span class="fu">read_csv</span>(url)</span>
<span id="cb304-6"><a href="introduction-to-r.html#cb304-6" aria-hidden="true" tabindex="-1"></a>conn <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(), d<span class="sc">$</span>url, <span class="at">dbname=</span>d<span class="sc">$</span>dbname, <span class="at">user=</span>d<span class="sc">$</span>user, <span class="at">password=</span>d<span class="sc">$</span>password)</span>
<span id="cb304-7"><a href="introduction-to-r.html#cb304-7" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(conn,<span class="st">&quot;SELECT timestamp, airTemp from record;&quot;</span>)</span>
<span id="cb304-8"><a href="introduction-to-r.html#cb304-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t)</span></code></pre></div>
<p>Despite the prior example, I will continue to show database access
parameters because you need them to run the sample code. However, in
practice you should follow the security advice given.</p>
<div id="timestamps" class="section level3 unnumbered hasAnchor">
<h3>Timestamps<a href="introduction-to-r.html#timestamps" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Many data sets include a timestamp to indicate when an observation was
recorded. A timestamp will show the data and time to the second or
microsecond. The format of a standard timestamp is yyyy-mm-dd hh:mm:ss
(e.g., 2010-01-31 03:05:46).</p>
<p>Some R functions, including those in the lubridate package, can detect a
standard format timestamp and support operations for extracting parts of
it, such as the year, month, day, hour, and so forth. The following
example shows how to use lubridate to extract the month and year from a
character string in standard timestamp format.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="introduction-to-r.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb305-2"><a href="introduction-to-r.html#cb305-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb305-3"><a href="introduction-to-r.html#cb305-3" aria-hidden="true" tabindex="-1"></a>conn <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(), <span class="st">&quot;www.richardtwatson.com&quot;</span>, <span class="at">dbname=</span><span class="st">&quot;Weather&quot;</span>, <span class="at">user=</span><span class="st">&quot;student&quot;</span>, <span class="at">password=</span><span class="st">&quot;student&quot;</span>)</span>
<span id="cb305-4"><a href="introduction-to-r.html#cb305-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Query the database and create file t for use with R</span></span>
<span id="cb305-5"><a href="introduction-to-r.html#cb305-5" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(conn,<span class="st">&quot;select * from record;&quot;</span>)</span>
<span id="cb305-6"><a href="introduction-to-r.html#cb305-6" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">year</span>(t<span class="sc">$</span>timestamp)</span>
<span id="cb305-7"><a href="introduction-to-r.html#cb305-7" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>month <span class="ot">&lt;-</span> <span class="fu">month</span>(t<span class="sc">$</span>timestamp)</span>
<span id="cb305-8"><a href="introduction-to-r.html#cb305-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t)</span></code></pre></div>
</div>
</div>
<div id="excel-files" class="section level2 unnumbered hasAnchor">
<h2>Excel files<a href="introduction-to-r.html#excel-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are a number of packages with methods for reading an Excel file.
Of these, readxl seems to be the simplest. However, it can handle only
files stored locally, which is the case with most of the packages
examined. If the required Excel spreadsheet is stored remotely, then
download it and store it locally.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="introduction-to-r.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb306-2"><a href="introduction-to-r.html#cb306-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb306-3"><a href="introduction-to-r.html#cb306-3" aria-hidden="true" tabindex="-1"></a><span class="co"># read remote file and store on disk</span></span>
<span id="cb306-4"><a href="introduction-to-r.html#cb306-4" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span>  <span class="st">&#39;http://www.richardtwatson.com/data/GDP.xlsx&#39;</span></span>
<span id="cb306-5"><a href="introduction-to-r.html#cb306-5" aria-hidden="true" tabindex="-1"></a><span class="fu">GET</span>(url,<span class="fu">write_disk</span>(<span class="st">&#39;temp.xlsx&#39;</span>,<span class="at">overwrite =</span> <span class="cn">TRUE</span>))</span>
<span id="cb306-6"><a href="introduction-to-r.html#cb306-6" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span>  <span class="fu">read_excel</span>(<span class="st">&#39;temp.xlsx&#39;</span>,<span class="at">sheet =</span> <span class="dv">1</span>,<span class="at">col_names =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="r-resources" class="section level2 unnumbered hasAnchor">
<h2>R resources<a href="introduction-to-r.html#r-resources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The vast number of packages makes the learning of R a major challenge.
The basics can be mastered quite quickly, but you will soon find that
many problems require special features or the data need some
manipulation. Once you learn how to solve a particular problem, make
certain you save the script, with some embedded comments, so you can
reuse the code for a future problem. There are books that you might find
useful to have in electronic format on your computer or tablet, and one
of these is listed at the end of the chapter. There are, however, many
more <a href="http://www.r-project.org/doc/bib/R-books.html">books</a>, both of a general and specialized nature. The
<a href="http://cran.r-project.org/doc/contrib/Short-refcard.pdf">R Reference Card</a> is
handy to keep nearby when you are writing scripts. I printed and
laminated a copy, and it’s in the top drawer of my desk. A useful
website is <a href="http://www.statmethods.net">Quick-R</a>, which is an
online reference for common tasks, such as those covered in this
chapter.</p>
</div>
<div id="r-and-data-analytics" class="section level2 unnumbered hasAnchor">
<h2>R and data analytics<a href="introduction-to-r.html#r-and-data-analytics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R is a platform for a wide variety of data analytics, including</p>
<ul>
<li><p>Statistical analysis</p></li>
<li><p>Data visualization</p></li>
<li><p>HDFS and cluster computing</p></li>
<li><p>Text mining</p></li>
<li><p>Energy Informatics</p></li>
<li><p>Dashboards</p></li>
</ul>
<p>You have probably already completed an introductory statistical analysis
course, and you can now use R for all your statistical needs. In
subsequent chapters, we will discuss data visualization, HDFS and
cluster computing, and text mining.</p>
<p>R is also a programming language. You might find that in some
situations, R provides a quick method for reshaping files and performing
calculations.</p>
<div id="summary-15" class="section level3 unnumbered hasAnchor">
<h3>Summary<a href="introduction-to-r.html#summary-15" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R is a free software environment for statistical computing, data
visualization, and data analytics. RStudio is a commonly used integrated
development environment (IDE) for R. A script is a set of R commands.
Store all R scripts and data for a project in the same folder or
directory. An R dataset is a table that can be stored as a vector,
matrix, array, data frame, and list. In R, an object is anything that
can be assigned to a variable. R can handle the four types of data:
nominal, ordinal, interval, and ratio. Nominal and ordinal data types
are also known as factors. Defining a column as a factor determines how
its data are analyzed and presented. Missing values are indicated by NA.
R can handle a wide variety of input formats, including text (e.g.,
CSV), statistical package (e.g., SAS), and XML. Data can be reshaped.
Gathering converts a document from what is commonly called wide to
narrow format. Spreading takes a narrow file and converts it to wide
format. Columns within a table are referenced using the format
tablename$columname. R can write data to a file. A major advantage of R
is that the basic software can be easily extended by installing
additional packages. The dplyr packages adds functionality for data
management and reporting. Learning R is a major challenge because of the
many packages available.</p>
</div>
<div id="key-terms-and-concepts-12" class="section level3 unnumbered hasAnchor">
<h3>Key terms and concepts<a href="introduction-to-r.html#key-terms-and-concepts-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<tbody>
<tr class="odd">
<td align="left">Aggregate</td>
<td align="left">R</td>
</tr>
<tr class="even">
<td align="left">Array</td>
<td align="left">Reshape</td>
</tr>
<tr class="odd">
<td align="left">Data frame</td>
<td align="left">Script</td>
</tr>
<tr class="even">
<td align="left">Data type</td>
<td align="left">Spread</td>
</tr>
<tr class="odd">
<td align="left">Factor</td>
<td align="left">SQL</td>
</tr>
<tr class="even">
<td align="left">Gather</td>
<td align="left">Tibble</td>
</tr>
<tr class="odd">
<td align="left">List</td>
<td align="left">Subset</td>
</tr>
<tr class="even">
<td align="left">Matrix</td>
<td align="left">Vector</td>
</tr>
<tr class="odd">
<td align="left">Package</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="references" class="section level3 unnumbered hasAnchor">
<h3>References<a href="introduction-to-r.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Wickham, H., &amp; Grolemund, G. (2017). <a href="https://r4ds.had.co.nz">R for data science</a>: O’Reilly.</p>
</div>
</div>
<div id="exercises-15" class="section level2 unnumbered hasAnchor">
<h2>Exercises<a href="introduction-to-r.html#exercises-15" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Access a <a href="http://richardtwatson.com/data/manheim.txt">car sales file</a>
which contains details of the sales of three car models: X, Y,
and Z.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Use the table function to compute the number of sales for each
type of model.</p></li>
<li><p>Use the table function to compute the number of sales for each
type of sale.</p></li>
<li><p>Report the mean price for each model.</p></li>
<li><p>Report the mean price for each type of sale.</p></li>
</ol></li>
<li><p>Use the ‘Import Dataset’ feature of RStudio to read
<a href="http://www.richardtwatson.com/data/electricityprices.csv">electricity data</a>, which
contains details of electricity prices for a major city.[^intror-10]
[^intror-10]: Note these prices have been transformed from the original
values, but are still representative of the changes over time.</p>
<ol style="list-style-type: lower-alpha">
<li><p>What is the maximum cost?</p></li>
<li><p>What is the minimum cost?</p></li>
<li><p>What is the mean cost?</p></li>
<li><p>What is the median cost?</p></li>
</ol></li>
<li><p>Read the table containing <a href="http://richardtwatson.com/data/wealth.csv">details of the wealth of various countries</a> and complete
the following exercises.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Sort the table by GDP per capita.</p></li>
<li><p>What is the average GDP per capita?</p></li>
<li><p>Compute the ratio of US GDP per capita to the average GDP per
capita.</p></li>
<li><p>What’s the correlation between GDP per capita and wealth per
capita?</p></li>
</ol></li>
<li><p>Merge the data for weather (database weather
discussed in the chapter) and electricity prices (Use RStudio’s
‘Import Dataset’ to read <a href="http://www.richardtwatson.com/data/electricityprices.csv">electricity data</a> and
compute the correlation between temperature and electricity price.
<em>Hint</em>: MySQL might return a timestamp with decimal seconds (e.g.,
2010-01-01 01:00:00.0), and you can remove the rightmost two
characters using <a href="http://www.statmethods.net/management/functions.html">substr()</a>, so that the two timestamp
columns are of the same format and length. Also, you need to ensure
that the timestamps from the two data frames are of the same data
type (e.g., both character).</p></li>
<li><p>Get the list of <a href="https://explore.data.gov/Banking-Finance-and-Insurance/FDIC-Failed-Bank-List/pwaj-zn2n">failed US banks</a>.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Determine how many banks failed in each state.</p></li>
<li><p>How many banks were not acquired (hint: nrow() will count rows
in a table)?</p></li>
<li><p>How many banks were closed each year (hint: use strptime() and
the lubridate package)?</p></li>
</ol></li>
<li><p>Use Table01 reporting <a href="http://usda.mannlib.cornell.edu/MannUsda/viewDocumentInfo.do?documentID=1816">U.S. broccoli data on farms and area harvested</a>.
Get rid of unwanted rows to create a spreadsheet for the area
harvested with one header row and the 50 states. Change cells
without integer values to 0 and save the file in CSV format for
reading with R.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Reshape the data so that each observation contains state name,
year, and area harvested.</p></li>
<li><p>Add hectares as a column in the table. Round the calculation to
two decimal places.</p></li>
<li><p>Compute total hectares harvested each year for which data are
available.</p></li>
<li><p>Save the reshaped file.</p></li>
</ol></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="organizational-intelligence.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-visualization-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DataManagement.pdf", "DataManagement.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
